{"version":3,"file":"chartstack.min.js","sources":["../src/chartstack.js","../src/util/chartstack.diver.js","../src/adapter/chartstack.keen.universal.adapter.js","../src/renderset/chartstack.googlecharts.renderset.js","../src/renderset/chartstack.nvd3.renderset.js","../src/renderset/chartstack.highcharts.renderset.js"],"names":["root","is","o","t","each","cb","s","n","length","call","hasOwnProperty","extend","e","v","noConflict","chartstack","previousChartstack","this","ready","isDomReady","readyCallbacks","push","bootstrap","defaults","library","Object","keys","renderers","ns","window","Error","parse","chartNodes","document","querySelectorAll","el","getAttribute","Chart","getAjax","url","xhr","createXHR","ActiveXObject","console","warn","message","XMLHttpRequest","onreadystatechange","readyState","responseText","open","setRequestHeader","send","get","strOrEl","matchedChart","nodeName","querySelector","charts","chart","addAdapter","domain","configObj","adapters","func","type","addRenderer","provider","addRenderSet","libNamespace","name","namespace","render","adapter","addTransformer","transformers","Adapter","json","data","JSON","addtransformer","labels","DataAdapter","args","setup","setupDom","setupJS","$chart","chartType","toLocaleLowerCase","style","display","k","attr","test","newKey","nodeType","dataformat","init","datasource","match","fetch","finish","formatRowLabel","key","i","renderer","show","hide","google","load","packages","setOnLoadCallback","addEventListener","cs","result","loop","arguments","Array","prototype","slice","target","pop","splinter","concat","apply","splice","proto","diver","build","self","cols","label","split","cells","fixed","rows","index","order","table","series","raw","sort","a","b","aIndex","bIndex","output","values","cell","j","value","aTotal","bTotal","record","transform","column","parseInt","row","format","piechart","extras","barchart","Date","linechart","diverFormat","visualization","arrayToDataTable","options","title","width","height","customOptions","prop","pieSliceTextStyle","color","pieSliceTextColor","titleTextStyle","titleTextColor","legend","textStyle","legendColor","PieChart","draw","BarChart","LineChart","ar","shift","item","entry","section","colomnKeys","rowDescription","selection","rowDesc","y","x","svg","createElementNS","m","setAttributeNS","appendChild","nv","addGraph","models","pieChart","d","showLabels","colors","d3","select","datum","transition","duration","multiBarChart","xAxis","tickFormat","time","yAxis","utils","windowResize","update","lineChart","scale","category10","range","useInteractiveGuideline","headers","join","categories","Highcharts","renderTo","plotBackgroundColor","plotBorderWidth","plotShadow","text","plotOptions","pie","allowPointSelect","cursor","dataLabels","enabled","connectorColor","formatter","point","percentage","min","align","overflow","bar","layout","verticalAlign","floating","borderWidth","backgroundColor","shadow","credits","plotLines"],"mappings":"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","sourcesContent":["/* global google */\n(function(root) {\n  var previousChartstack = root.chartstack;\n  var chartstack = root.chartstack = {};\n  var adapters, renderers, charts, Chart, Adapter, transformers, isDomReady, readyCallbacks = [];\n\n  // These three functions taken from https://github.com/spocke/punymce\n  function is(o, t){\n    o = typeof(o);\n\n    if (!t){\n      return o != 'undefined';\n    }\n\n    return o == t;\n  }\n\n  function each(o, cb, s){\n    var n;\n\n    if (!o){\n      return 0;\n    }\n\n    s = !s ? o : s;\n\n    if (is(o.length)){\n      // Indexed arrays, needed for Safari\n      for (n=0; n<o.length; n++) {\n        if (cb.call(s, o[n], n, o) === false){\n          return 0;\n        }\n      }\n    } else {\n      // Hashtables\n      for (n in o){\n        if (o.hasOwnProperty(n)) {\n          if (cb.call(s, o[n], n, o) === false){\n            return 0;\n          }\n        }\n      }\n    }\n\n    return 1;\n  }\n\n  // Extend object e on to o.\n  function extend(o, e){\n    each(e, function(v, n){\n      o[n] = v;\n    });\n\n    return o;\n  }\n\n\n  function noConflict(){\n    root.chartstack = previousChartstack;\n    return this;\n  }\n\n  // DOM-ready queue method.\n  function ready(cb){\n    if (!isDomReady){\n      readyCallbacks.push(cb);\n    }else{\n      cb();\n    }\n  }\n\n  // Called when DOM and chart libs are loaded and ready.\n  function bootstrap (){\n    // If graph library isn't set in defaults, match provider to the first graph\n    // lib found on the page that we have an adapter for.\n    if (chartstack.defaults.library){\n      chartstack.library = chartstack.defaults.library;\n    }else{\n      each(Object.keys(chartstack.renderers), function(ns){\n        if (ns in window){\n          chartstack.library = ns;\n          return false;\n        }\n      });\n\n      if (!chartstack.library){\n        throw new Error('No charting library located.');\n      }\n\n      // Parse the dom.\n      chartstack.parse();\n\n      isDomReady = true;\n      each(readyCallbacks, function(cb){\n        cb();\n      });\n    }\n  }\n\n  // Parse the DOM and search for valid charting elements to turn to classes.\n  function parse(){\n    var chartNodes = document.querySelectorAll('piechart,barchart,linechart');\n    each(chartNodes, function(el){\n      // Ensure data attribute exists.\n      if (el.getAttribute('datasource')){\n        new Chart(el);\n      }\n    });\n  }\n\n  function getAjax(url, cb){\n    var xhr;\n    var createXHR = function(){\n      var xhr;\n      if (window.ActiveXObject){\n        try{\n          xhr = new ActiveXObject(\"Microsoft.XMLHTTP\");\n        }catch(e){\n          console.warn(e.message);\n          xhr = null;\n        }\n      }else{\n        xhr = new XMLHttpRequest();\n      }\n      return xhr;\n    };\n\n    xhr = createXHR();\n    xhr.onreadystatechange = function(){\n      if (xhr.readyState === 4){\n        cb(xhr.responseText);\n      }\n    };\n    xhr.open('GET', url, true);\n    xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n    xhr.send();\n  }\n\n  // Returns a chartstack object by html element id or element comparison.\n  function get(strOrEl){\n    var el = strOrEl.nodeName ? strOrEl : document.querySelector(strOrEl);\n    var matchedChart;\n\n    if (el){\n      each(chartstack.charts, function(chart){\n        if (el == chart.el){\n          matchedChart = chart;\n          return false;\n        }\n      });\n      return matchedChart;\n    }\n    throw(\"That element doesn't exist on the page.\");\n  }\n\n  // Adapters that normalize 3rd party api to a standard format.\n  function addAdapter(domain, configObj){\n    if (chartstack.is(configObj, 'function')){\n      adapters[domain] = configObj;\n    }else{\n      each(configObj, function(func, type){\n        // If domain doesn't exist, create the namespace.\n        if (!adapters[domain]){\n          adapters[domain] = {};\n        }\n        adapters[domain][type] = func;\n\n      });\n    }\n  }\n\n  // Chart specific Renderers that Chartstack uses to render charts.\n  function addRenderer(provider, configObj){\n    each(configObj, function(func, type){\n      if (!renderers[provider]){\n        renderers[provider] = {};\n      }\n\n      renderers[provider][type] = func;\n    });\n  }\n\n  // Rendersets are chart library-related renderer and adapters.\n  function addRenderSet(configObj){\n    var libfullName = configObj.name;\n    var libNamespace = configObj.namespace;\n\n    chartstack.addRenderer(libNamespace, configObj.render)\n    chartstack.addAdapter(libNamespace, configObj.adapter)\n  }\n\n\n  // Methods that transform non-JSON data to JSON.\n  function addTransformer(name, func){\n    transformers[name] = func;\n  }\n\n  // Placeholder for chartstack data adapters.\n  chartstack.adapters = adapters = {};\n\n  // Placeholder for chartstack renderers.\n  chartstack.renderers = renderers = {};\n\n  // Array of instantiated charts.\n  chartstack.charts = charts = [];\n\n  // Placeholder for transform data adapters.\n  chartstack.transformers = transformers = {\n    json : function(data){\n      if (typeof data == 'string'){\n        return JSON.parse(data);\n      }else{\n        return data;\n      }\n    }\n  };\n\n  // Store them in API as well for plugin use.\n  extend(chartstack, {\n    noConflict : noConflict,\n    parse : parse,\n    is : is,\n    each : each,\n    extend : extend,\n    getAjax : getAjax,\n    ready: ready,\n    get: get,\n    addAdapter : addAdapter,\n    addRenderer : addRenderer,\n    addRenderSet : addRenderSet,\n    addtransformer : addTransformer\n  });\n\n  // Defaults accessible from outside in case user wants to change them.\n  // DOM properties override defaults.\n  chartstack.defaults = {\n    labels: true\n  };\n\n  chartstack.DataAdapter = Adapter = function(){\n  };\n\n  // Main Chart class.\n  chartstack.Chart = Chart = function(args) {\n    var $chart = this;\n    // Add to internal array.\n    chartstack.charts.push(this);\n\n    // Collects properties off DOM element and inspects data source.\n\n    function setup(){\n      var setupDom, setupJS, domain;\n\n      setupDom = function(){\n        $chart.el = args;\n\n        // Type of chart.\n        $chart.chartType = $chart.el.nodeName.toLocaleLowerCase();\n\n        // Our made up HTML nodes are display: inline so we need to make\n        // them block;\n        $chart.el.style.display = \"inline-block\";\n      };\n\n      setupJS = function(){\n        $chart.el = args.el;\n\n        // Type of chart.\n        $chart.chartType = args.chartType;\n      };\n\n      // Copy global defaults on to this chart.\n      each(chartstack.defaults, function(k, v){\n        $chart[v] = k;\n      });\n\n      if ('nodeType' in args){\n        setupDom();\n      }else{\n        setupJS();\n      }\n\n      // Find properties on dom element to override defaults.\n      // Support arrays here so we can store the data under a different name.\n      // TODO: These strings should be objects with support for defaults and other options.\n      each([\n        ['provider', 'domain'],\n        'datasource',\n        'dataformat',\n        'library',\n        'labels',\n        'width',\n        'height',\n        'title',\n        'titleTextColor', // Custom, currently supported on Google  TODO: NVD3\n        'legendColor', // Custom, currently supported on Google TODO: NVD3\n        'colors', // item colors - Supported for all chart types for Google and NVD3.\n        'pieSliceBorderColor', // TODO: Pie only  TODO: NVD3\n        'pieSliceTextColor', // TODO: Pie only  TODO: NVD3\n        'backgroundColor', // Bg color of chart.  TODO: NVD3\n        'customOptions',\n        // methods\n        'formatRowLabel' // Pie labels, xlabels on other charts.\n      ], function(attr){\n        var test, newKey;\n\n        if (is(attr, 'object')){\n          newKey = attr[1];\n          attr = attr[0];\n        }\n        test = args.nodeType ? args.getAttribute(attr) : args[attr];\n        // If property exists, save it.\n        if (test){\n          // Support for real booleans.\n          if (test == 'false' || test == '0' || test == 'off'){\n            test = false;\n          }else if (test == 'true' || test == '1' || test == \"on\"){\n            test = true;\n          }\n\n          if (newKey){\n            $chart[newKey] = test;\n          }else{\n            $chart[attr] = test;\n          }\n        }\n      });\n\n      // If we don't have a localized library set on this chart then set the\n      // global one.\n      if (!$chart.library){\n        $chart.library = chartstack.library;\n      }\n\n      // Used to transform response if needed to JSON.\n      if (!$chart.dataformat){\n        $chart.dataformat = 'json';\n      }\n\n      // Run library renderer's init if the lib needs to do some setup.\n      if (renderers[$chart.library] && renderers[$chart.library].init){\n        renderers[$chart.library].init($chart);\n      }\n\n      // Check datasource starts with { or [ assume it's JSON or else\n      // assume it's a URL to fetch.  We do not check for http anymore\n      // as it can be a local/relative file.\n      if (typeof $chart.datasource == 'string'){\n        if ($chart.datasource.match(/^({|\\[)/)){\n          $chart.datasource = JSON.parse($chart.datasource);\n        }else{\n          domain = $chart.datasource.match(/\\/\\/(.*?)\\//);\n          if (domain){\n            $chart.domain = domain[1];\n          }\n        }\n      }\n    }\n\n\n    // Fetches and normalizes data with a callback to pass data to.\n    function fetch(cb){\n      function finish(data){\n\n        // Transform data from CSV, etc, to JSON.\n        if ($chart.dataformat in transformers){\n          data = transformers[$chart.dataformat](data);\n        }else{\n          throw new Error('Transformer for datatype missing: ' + $chart.dataformat);\n        }\n\n        // If domain specified, check if we have adapters for this domain and\n        // that we also have a chart adapter for this chart from this domain.\n        if (adapters[$chart.domain] && adapters[$chart.domain][$chart.chartType]){\n          data = adapters[$chart.domain][$chart.chartType].call(new Adapter, data);\n        }\n\n        // TODO: Put this in a modular place. Probably in adapter object post init.\n        if ($chart.formatRowLabel){\n          chartstack.each(data.data, function(key, i){\n            if (i == 0){ return;}\n            data.data[i][0] = $chart.formatRowLabel(key[0]);\n          });\n        }\n\n        // Transform data into graph libs format using graph library's data\n        // adapter. Data adapter can be one method or an object of methods of\n        // chart types depending on how the chart library handles data.\n        if (chartstack.is(adapters[$chart.library], 'function')){\n          data = adapters[$chart.library].call(new Adapter, data);\n        }else{\n          data = adapters[$chart.library][$chart.chartType].call(new Adapter, data);\n        }\n        cb(data);\n      }\n\n      // If this is a URL fetch data.\n      if (typeof $chart.datasource == \"string\"){\n        chartstack.getAjax($chart.datasource, finish);\n\n        // The data is local.\n      }else{\n        finish($chart.datasource);\n      }\n    }\n\n    setup();\n    fetch(function(data){\n      var renderer = chartstack.renderers[$chart.library];\n      if (!renderer){\n        throw('Renderer for ' + $chart.library + ' is missing.');\n      }else if(!renderer[$chart.chartType]){\n        throw('Renderer for ' + $chart.library + ':' + $chart.chartType + ' is missing.');\n      }\n      renderer[$chart.chartType]($chart, data);\n    });\n\n    // Public methods\n    extend(this, {\n      show : function(){\n        this.el.style.display = 'none';\n      },\n\n      hide : function(){\n        this.el.style.display = 'block';\n      },\n\n      render : function(){\n        // TODO\n        // chartstack.renderer[this.chartType](this, this.fetch());\n      },\n\n      fetch : function(cb){\n        cb || (cb = function(){});\n        fetch(cb);\n      }\n    });\n  };\n\n  // Hack to support google charts.\n  if (window.google){\n    google.load('visualization', '1.0', {'packages':['corechart']});\n    google.setOnLoadCallback(bootstrap);\n  }else{\n    document.addEventListener(\"DOMContentLoaded\", bootstrap);\n  }\n})(this);\n","/* global chartstack */\n(function(cs){\n  var proto;\n  var each = chartstack.each;\n\n  cs.diver = function(root, setup) {\n    this.build(root, setup);\n  };\n\n  proto = cs.diver.prototype;\n\n  proto.build = function(root, setup) {\n    var self = this;\n\n    self.cols = {\n      label: (setup.cols.label) ? setup.cols.label.split(\" -> \") : false,\n      cells: (setup.cols.cells) ? setup.cols.cells.split(\" -> \") : false,\n      fixed: (setup.cols.fixed) ? setup.cols.fixed : false\n    };\n\n    self.rows = {\n      index: setup.rows.index.split(\" -> \"),\n      cells: setup.rows.cells.split(\" -> \")\n    };\n    self.order = {\n      rows: (setup.order && setup.order.rows) ? setup.order.rows.split(\":\") : false,\n      cols: (setup.order && setup.order.cols) ? setup.order.cols.split(\":\") : false\n    };\n\n    self.table = [];\n    self.series = [];\n    self.raw = root;\n\n\n    // SORT ROWS\n    if (self.order.rows.length > 0) {\n      root.sort(function(a, b){\n        var aIndex = parse.apply(self, [a].concat(self.rows.index));\n        var bIndex = parse.apply(self, [b].concat(self.rows.index));\n\n        if (self.order.rows[1] == 'asc') {\n          if (aIndex > bIndex){return 1;}\n          if (aIndex < bIndex){return -1;}\n          return 0;\n        } else {\n          if (aIndex > bIndex){return -1;}\n          if (aIndex < bIndex){return 1;}\n          return 0;\n        }\n\n        return false;\n      });\n    }\n\n    // ADD SERIES\n    (function(){\n\n      self.cols.label = (self.cols.fixed) ? self.cols.fixed[0] : 'series';\n      var fixed = (self.cols.fixed) ? self.cols.fixed : [];\n      var cells = (self.cols.cells) ? parse.apply(self, [root[0]].concat(self.cols.cells)) : [];\n      var output = fixed.concat(cells);\n      output.splice(0,1);\n\n      each(output, function(el){\n        self.series.push({ key: el, values: [] });\n      });\n    })();\n\n    // ADD SERIES' RECORDS\n    each(root, function(el){\n      var index = parse.apply(self, [el].concat(self.rows.index));\n      var cells = parse.apply(self, [el].concat(self.rows.cells));\n\n      each(cells, function(cell, j){\n        var output = {};\n        output[self.cols.label] = index[0];\n        output.value = cell;\n        self.series[j].values.push(output);\n      });\n    });\n\n    // SORT COLUMNS\n    if (self.order.cols.length > 0) {\n      self.series = self.series.sort(function(a, b){\n        var aTotal = 0;\n        var bTotal = 0;\n        each(a.values, function(record){\n          aTotal += record.value;\n        });\n        each(b.values, function(record){\n          bTotal += record.value;\n        });\n\n        if (self.order.cols[1] == 'asc') {\n          return aTotal - bTotal;\n        } else {\n          return bTotal - aTotal;\n        }\n      });\n    }\n\n    // BUILD TABLE\n    self.table = [];\n    self.table.push([self.cols.label]);\n\n    each(self.series[0].values, function(value){\n      self.table.push([value[self.cols.label]]);\n    });\n\n    each(self.series, function(series){\n      self.table[0].push(series.key);\n      each(series.values, function(record, j){\n        self.table[j+1].push(record.value);\n      });\n    });\n\n    // COLUMN TRANSFORMS\n    if (setup.cols.transform) {\n      for (var transform in setup.cols.transform) {\n        if (transform == 'all') {\n          each(self.table[0], function(column, index){\n            if (index > 0) {\n              self.table[0][index] = setup.cols.transform[transform](self.table[0][index]);\n            }\n          });\n        } else {\n          transform = parseInt(transform);\n          if (self.table[0].length > transform) {\n            self.table[0][transform] = setup.cols.transform[transform](self.table[0][transform]);\n          }\n        }\n      }\n    }\n\n    // ROW TRANSFORMS\n    if (setup.rows.transform) {\n      each(self.table, function(row, index){\n        if (index > 0) {\n          for (var transform in setup.rows.transform) {\n            self.table[index][transform] = setup.rows.transform[transform](self.table[index][transform]);\n          }\n        }\n      });\n    }\n\n    return this;\n  };\n\n  proto.render = function(format){\n    if (format == 'csv') {\n    }\n    return this;\n  };\n\n  function parse() {\n    var result = [];\n    var loop = function() {\n      var root = arguments[0];\n      var args = Array.prototype.slice.call(arguments, 1);\n      var target = args.pop();\n\n      if (args.length === 0) {\n        if (root instanceof Array) {\n          args = root;\n        } else if (typeof root === 'object') {\n          args.push(root);\n        }\n      }\n\n      each(args, function(el){\n\n        if (el[target] || el[target] == 0 || el[target] !== void 0) {\n          // Easy grab!\n          if (el[target] === null) {\n            return result.push('');\n          } else {\n            return result.push(el[target]);\n          }\n\n        } else if (root[el]){\n          if (root[el] instanceof Array) {\n            // dive through each array item\n\n            each(root[el], function(n, i) {\n              var splinter = [root[el]].concat(root[el][i]).concat(args.slice(1)).concat(target);\n              return loop.apply(this, splinter);\n            });\n\n          } else {\n            if (root[el][target]) {\n              // grab it!\n              return result.push(root[el][target]);\n\n            } else {\n              // dive down a level!\n              return loop.apply(this, [root[el]].concat(args.splice(1)).concat(target));\n\n            }\n          }\n\n        } else {\n          // dive down a level!\n          return loop.apply(this, [el].concat(args.splice(1)).concat(target));\n\n        }\n\n        return;\n\n      });\n      if (result.length > 0) {\n        return result;\n      }\n    };\n    return loop.apply(this, arguments);\n  }\n})(chartstack);\n","/* global chartstack */\n// Data normalizing adaper for keen.io API.\n(function(cs){\n  cs.addAdapter('api.keen.io', {\n    piechart: function(data){\n      data = new cs.diver(data.result, {\n        cols: {\n          fixed: ['Browser', 'Share']\n        },\n        rows: {\n          index: 'platform',\n          cells: 'result'\n        }\n      });\n\n      return {\n        data: data.table,\n        extras: {}\n      };\n    },\n\n    barchart: function(data){\n      data = new cs.diver(data.result, {\n        cols: {\n          fixed: ['Date'],\n          cells: 'value -> platform'\n        },\n        rows: {\n          index: 'timeframe -> start',\n          cells: 'value -> result',\n          transform: {\n            0: function(value){\n              return new Date(value);\n            }\n          }\n        }\n      });\n\n      return {\n        data: data.table,\n        extras: {}\n      };\n    },\n\n    linechart: function(data){\n      var diverFormat;\n\n      if(data.result[0].value instanceof Array){\n        diverFormat = {\n          cols: {\n            fixed: ['Date'],\n            cells: 'value -> platform'\n          },\n          rows: {\n            index: 'timeframe -> start',\n            cells: 'value -> result',\n            transform: {\n              0: function(value){\n                return new Date(value);\n              }\n            }\n          }\n        }\n      }else{\n        diverFormat = {\n          cols: {\n            fixed: ['Date', 'Value']\n          },\n          rows: {\n            index: 'timeframe -> start',\n            cells: 'value',\n            transform: {\n              0: function(value){\n                return new Date(value);\n              }\n            }\n          }\n        }\n      }\n\n      data = new cs.diver(data.result, diverFormat);\n\n      return {\n        data: data.table,\n        extras: {}\n      };\n    }\n  });\n})(chartstack);\n","/* global google, chartstack */\n(function(cs){\n  cs.addRenderSet({\n    name: 'Google Charts',\n    namespace: 'google',\n\n    // Adapts data from UD format to library format.\n    adapter: function(data){\n      return google.visualization.arrayToDataTable(data.data);\n    },\n\n    // Renders DOM charts.\n    render: {\n      piechart: function($chart, data){\n        var chart, options;\n        var each = cs.each;\n        var extend = cs.extend;\n\n        // Set chart options\n        options = {\n          'title': $chart.title || '',\n          'width': parseInt($chart.width),\n          'height': parseInt($chart.height)\n        };\n\n        if ($chart.customOptions){\n          extend(options, $chart.customOptions);\n        }\n\n        each(['backgroundColor', 'pieSliceBorderColor', 'colors'], function(prop){\n          if (prop in $chart){\n            options[prop] = $chart[prop];\n          }\n        });\n\n        if ('pieSliceTextColor' in $chart){\n          options.pieSliceTextStyle = {\n            color: $chart.pieSliceTextColor\n          };\n        }\n\n        if ('titleTextColor' in $chart){\n          options.titleTextStyle = {\n            color: $chart.titleTextColor\n          };\n        }\n\n        if ('legendColor' in $chart){\n          options.legend = {\n            textStyle: {\n              color: $chart.legendColor\n            }\n          };\n        }\n\n        chart = new google.visualization.PieChart($chart.el);\n        chart.draw(data, options);\n      },\n\n      barchart: function($chart, data){\n        var chart, options;\n        var each = cs.each;\n        var extend = cs.extend;\n\n        // Set chart options\n        options = {\n          title: $chart.title || '',\n          'width': parseInt($chart.width),\n          'height': parseInt($chart.height)\n        };\n\n        each(['backgroundColor', 'pieSliceBorderColor', 'colors'], function(prop){\n          if (prop in $chart){\n            options[prop] = $chart[prop];\n          }\n        });\n\n        if ('titleTextColor' in $chart){\n          options.titleTextStyle = {\n            color: $chart.titleTextColor\n          };\n        }\n\n        if ('legendColor' in $chart){\n          options.legend = {\n            textStyle: {\n              color: $chart.legendColor\n            }\n          };\n        }\n\n        chart = new google.visualization.BarChart($chart.el);\n        chart.draw(data, options);\n      },\n\n      linechart: function($chart, data){\n        var chart, options;\n        var each = cs.each;\n        var extend = cs.extend;\n\n        // Set chart options\n        options = {\n          title: $chart.title || '',\n          'width': parseInt($chart.width),\n          'height': parseInt($chart.height)\n        };\n\n        each(['backgroundColor', 'pieSliceBorderColor', 'colors'], function(prop){\n          if (prop in $chart){\n            options[prop] = $chart[prop];\n          }\n        });\n\n        if ('titleTextColor' in $chart){\n          options.titleTextStyle = {\n            color: $chart.titleTextColor\n          };\n        }\n\n        if ('legendColor' in $chart){\n          options.legend = {\n            textStyle: {\n              color: $chart.legendColor\n            }\n          };\n        }\n\n        chart = new google.visualization.LineChart($chart.el);\n        chart.draw(data, options);\n      }\n    }\n  });\n\n})(chartstack);\n","/* global chartstack */\n(function(cs){\n  cs.addRenderSet({\n    name: 'NVD3',\n    namespace: 'nv',\n\n    // Adapts data from UD format to library format.\n    adapter: {\n      piechart: function(data){\n        data = data.data;\n\n        var ar = [];\n\n        // Pop off unused header array.\n        data.shift();\n\n        cs.each(data, function(item){\n          var entry = {\n            label: item[0],\n            value: item[1]\n          };\n          ar.push(entry);\n        });\n        return ar;\n      },\n\n      barchart: function(data){\n        data = data.data;\n\n        var each = cs.each;\n        var section = [];\n        var colomnKeys = data.shift();\n        var rowDescription = colomnKeys.shift();\n\n        // Prep rows\n        each(colomnKeys, function(name){\n          section.push({\n            key: name,\n            values: []\n          });\n        });\n\n        each(data, function(selection){\n          var rowDesc = selection.shift();\n          each(selection, function(y, a){\n            section[a].values.push({\n              x: rowDesc,\n              y: y\n            });\n          });\n        });\n\n        return {\n          result: section,\n          options: {\n            rowDescription: rowDescription\n          }\n        };\n      },\n\n      linechart: function(data){\n        data = data.data;\n\n        var each = cs.each;\n        var section = [];\n        var colomnKeys = data.shift();\n        var rowDescription = colomnKeys.shift();\n\n        // Prep rows\n        each(colomnKeys, function(name){\n          section.push({\n            key: name,\n            values: []\n          });\n        });\n\n        each(data, function(selection){\n          var rowDesc = selection.shift();\n          each(selection, function(y, a){\n            section[a].values.push([rowDesc, y]);\n          });\n        });\n\n        return {\n          result: section,\n          options: {\n            rowDescription: rowDescription\n          }\n        };\n      }\n    },\n\n    // Renders DOM charts.\n    render: {\n      init: function($chart){\n        // Create the SVG element that D3 needs.\n        $chart.svg = document.createElementNS ('http://www.w3.org/2000/svg', 'svg');\n        // Set height and width of SVG to it's parent's container.\n        cs.each(['width', 'height'], function(m){\n          var v = parseInt($chart[m]);\n          $chart[m] = v;\n          $chart.svg.setAttributeNS(null, m, v);\n        });\n\n        $chart.el.appendChild($chart.svg);\n      },\n\n      piechart: function($chart, data){\n\n        // Regular pie chart example\n        nv.addGraph(function() {\n          var chart = nv.models.pieChart()\n            .x(function(d) { return d.label; })\n            .y(function(d) { return d.value; })\n            .showLabels($chart.labels);\n\n          if ('colors' in $chart){\n            chart.color($chart.colors);\n          }\n\n          d3.select($chart.svg)\n            .datum(data)\n            .transition().duration(350)\n            .call(chart);\n\n          return chart;\n        });\n      },\n\n      barchart: function($chart, data){\n        nv.addGraph(function() {\n          var chart = nv.models.multiBarChart();\n\n          // Required to set the height once more or it's too small.\n          chart.width($chart.width).height($chart.height);\n\n          if (data.result[0].values[0].x instanceof Date){\n            chart.xAxis\n              .tickFormat(function(d) {\n                return d3.time.format('%b %d')(new Date(d));\n              });\n          }else{\n            chart.xAxis\n              .tickFormat(d3.format('f'));\n          }\n\n          if ('colors' in $chart){\n            chart.color($chart.colors);\n          }\n\n          chart.yAxis\n          //.axisLabel('Count')\n            .tickFormat(d3.format(',f'));\n\n          d3.select($chart.svg)\n            .datum(data.result)\n            .transition().duration(500)\n            .call(chart);\n\n          nv.utils.windowResize(chart.update);\n        });\n      },\n\n      linechart: function($chart, data){\n        var chart = nv.models.lineChart()\n          .x(function(d) { return d[0]; })\n          .y(function(d) { return d[1]; })\n          .color(d3.scale.category10().range())\n          .useInteractiveGuideline(true);\n\n        if (data.result[0].values[0][0] instanceof Date){\n          chart.xAxis\n            .tickFormat(function(d) {\n              return d3.time.format('%b %d')(new Date(d));\n            });\n        }else{\n          chart.xAxis\n            .tickFormat(d3.format('f'));\n        }\n\n        if ('colors' in $chart){\n          chart.color($chart.colors);\n        }\n\n        //chart.xAxis\n        //  .tickFormat(function(d) {\n        //    return d3.time.format('%x')(new Date(d));\n        //  });\n\n        chart.yAxis\n          .tickFormat(d3.format(',g'));\n\n        d3.select($chart.svg)\n          .datum(data.result)\n          .call(chart);\n\n        chart.width($chart.width).height($chart.height).update();\n        nv.utils.windowResize(chart.update);\n        return chart;\n      }\n\n    }\n\n  });\n})(chartstack);\n","/* global google, chartstack */\n(function(cs){\n  cs.addRenderSet({\n    name: 'Highcharts',\n    namespace: 'Highcharts',\n\n    // Adapts data from UD format to library format.\n    adapter: {\n      piechart: function(data){\n        data = data.data;\n        var headers = data.shift();\n\n        return {\n          type: 'pie',\n          name: headers.join(' '),\n          data: data\n        };\n      },\n\n      barchart: function(data){\n        data = data.data;\n\n        var each = cs.each;\n        var section = [];\n        var colomnKeys = data.shift();\n        var rowDescription = colomnKeys.shift();\n        var categories = [];\n\n        // Prep rows\n        each(colomnKeys, function(name){\n          section.push({\n            name: name,\n            data: []\n          });\n        });\n\n        each(data, function(selection){\n          categories.push(selection.shift());\n          each(selection, function(y, a){\n            section[a].data.push(y);\n          });\n        });\n\n        return {\n          result: section,\n          options: {\n            categories: categories,\n            rowDescription: rowDescription\n          }\n        };\n      },\n\n      linechart: function(data){\n        data = data.data;\n\n        var each = cs.each;\n        var section = [];\n        var colomnKeys = data.shift();\n        var rowDescription = colomnKeys.shift();\n        var categories = [];\n\n        // Prep rows\n        each(colomnKeys, function(name){\n          section.push({\n            name: name,\n            data: []\n          });\n        });\n\n        each(data, function(selection){\n          categories.push(selection.shift());\n          each(selection, function(y, a){\n            section[a].data.push(y);\n          });\n        });\n        return {\n          result: section,\n          options: {\n            categories: categories,\n            rowDescription: rowDescription\n          }\n        };\n      }\n    },\n\n    // Renders DOM charts.\n    render: {\n\n      piechart: function($chart, data){\n        return new Highcharts.Chart({\n          chart: {\n            renderTo: $chart.el,\n            type: 'pie',\n            plotBackgroundColor: null,\n            plotBorderWidth: null,\n            plotShadow: false\n          },\n          title: {\n            text: $chart.title || ''\n          },\n\n          //tooltip: {\n          //  pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'\n          //},\n\n          plotOptions: {\n            pie: {\n              allowPointSelect: true,\n              cursor: 'pointer',\n              dataLabels: {\n                enabled: true,\n                color: '#000000',\n                connectorColor: '#000000',\n                formatter: function() {\n                  return '<b>'+ this.point.name +'</b>: '+ this.percentage +' %';\n                }\n              }\n            }\n          },\n\n          series: [data]\n        });\n      },\n\n      barchart: function($chart, data){\n        return new Highcharts.Chart({\n          chart: {\n            renderTo: $chart.el,\n            type: 'bar',\n            plotBackgroundColor: null,\n            plotBorderWidth: null,\n            plotShadow: false\n          },\n          title: {\n            text: $chart.title || ''\n          },\n          xAxis: {\n            title: {\n              text: data.options.rowDescription\n            },\n            labels: {\n              // format: '{value:%m-%d}'\n            },\n            categories: data.options.categories\n          },\n          yAxis: {\n            min: 0,\n            title: {\n              align: 'high'\n            },\n            labels: {\n              overflow: 'justify'\n            }\n          },\n          //tooltip: {\n          //  valueSuffix: ' millions'\n          //},\n          plotOptions: {\n            bar: {\n              dataLabels: {\n                enabled: true\n              }\n            }\n          },\n          legend: {\n            layout: 'vertical',\n            align: 'right',\n            verticalAlign: 'top',\n            x: -40,\n            y: 100,\n            floating: true,\n            borderWidth: 1,\n            backgroundColor: '#FFFFFF',\n            shadow: true\n          },\n          credits: {\n            enabled: false\n          },\n          series: data.result\n        });\n      },\n\n      linechart: function($chart, data){\n        return new Highcharts.Chart({\n          chart: {\n            renderTo: $chart.el,\n            type: 'line',\n            plotBackgroundColor: null,\n            plotBorderWidth: null,\n            plotShadow: false\n          },\n          title: {\n            text: $chart.title || '',\n            x: -20 //center\n          },\n          xAxis: {\n            categories: data.options.categories,\n            title: {\n              text: data.options.rowDescription\n            }\n          },\n          yAxis: {\n            title: {\n              // text: 'Temperature (°C)'\n            },\n            plotLines: [{\n              value: 0,\n              width: 1,\n              color: '#808080'\n            }]\n          },\n          //tooltip: {\n          //  valueSuffix: '°C'\n          //},\n          legend: {\n            layout: 'vertical',\n            align: 'right',\n            verticalAlign: 'middle',\n            borderWidth: 0\n          },\n          series: data.result\n        });\n      }\n    }\n  });\n\n})(chartstack);\n"]}