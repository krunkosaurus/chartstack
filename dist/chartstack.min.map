{"version":3,"file":"chartstack.min.js","sources":["../src/chartstack.js","../src/util/chartstack.dataform.js","../src/adapter/chartstack.keen.universal.adapter.js","../src/renderset/chartstack.googlecharts.renderset.js","../src/renderset/chartstack.nvd3.renderset.js","../src/renderset/chartstack.highcharts.renderset.js"],"names":["root","is","o","t","each","cb","s","n","length","call","hasOwnProperty","extend","e","v","noConflict","chartstack","previousChartstack","this","ready","isDomReady","readyCallbacks","push","bootstrap","defaults","library","Object","keys","renderers","ns","window","Error","parse","chartNodes","document","querySelectorAll","el","getAttribute","Chart","getAjax","url","xhr","createXHR","ActiveXObject","console","warn","message","XMLHttpRequest","onreadystatechange","readyState","responseText","open","setRequestHeader","send","get","strOrEl","matchedChart","nodeName","querySelector","charts","chart","addAdapter","domain","configObj","adapters","func","type","addRenderer","provider","addRenderSet","libNamespace","name","namespace","render","adapter","addTransformer","transformers","buildQueryString","params","query","key","value","prototype","toString","JSON","stringify","encodeURIComponent","join","parseParams","str","match","urlParams","pl","search","decode","decodeURIComponent","replace","split","exec","Adapter","Event","json","data","addtransformer","labels","DataAdapter","allEvents","on","eventName","off","indexOf","splice","trigger","self","args","Array","slice","arguments","shift","forEach","apply","DataResource","config","response","option","configure","log","attribute","set","attributes","Dataset","resources","source","fetch","responses","completions","finish","index","error","resource","successSequencer","at","setup","setupDom","setupJS","$chart","chartType","toLocaleLowerCase","style","display","k","attr","test","newKey","nodeType","dataformat","init","datasource","dataset","formatRowLabel","i","renderer","show","hide","draw","google","load","packages","setOnLoadCallback","addEventListener","cs","result","loop","target","pop","splinter","concat","proto","dataform","map","build","table","series","raw","cols","split_index","split_value","output","fixed","label","rows","cells","order","sort","a","b","aIndex","bIndex","values","cell","j","aTotal","bTotal","record","transform","column","parseInt","row","extras","piechart","diver","barchart","Date","linechart","diverFormat","visualization","arrayToDataTable","options","title","width","height","customOptions","prop","pieSliceTextStyle","color","pieSliceTextColor","titleTextStyle","titleTextColor","legend","textStyle","legendColor","PieChart","BarChart","LineChart","ar","item","entry","section","colomnKeys","rowDescription","selection","rowDesc","y","x","svg","createElementNS","m","setAttributeNS","appendChild","nv","addGraph","models","pieChart","d","showLabels","colors","d3","select","datum","transition","duration","multiBarChart","xAxis","tickFormat","time","format","yAxis","utils","windowResize","update","lineChart","scale","category10","range","useInteractiveGuideline","headers","categories","Highcharts","renderTo","plotBackgroundColor","plotBorderWidth","plotShadow","text","plotOptions","pie","allowPointSelect","cursor","dataLabels","enabled","connectorColor","formatter","point","percentage","min","align","overflow","bar","layout","verticalAlign","floating","borderWidth","backgroundColor","shadow","credits","plotLines"],"mappings":"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","sourcesContent":["/* global google */\n(function(root) {\n  var previousChartstack = root.chartstack;\n  var chartstack = root.chartstack = {};\n  var adapters, renderers, charts, Chart, Adapter, Event, transformers, isDomReady, readyCallbacks = [];\n\n  // These three functions taken from https://github.com/spocke/punymce\n  function is(o, t){\n    o = typeof(o);\n\n    if (!t){\n      return o != 'undefined';\n    }\n\n    return o == t;\n  }\n\n  function each(o, cb, s){\n    var n;\n\n    if (!o){\n      return 0;\n    }\n\n    s = !s ? o : s;\n\n    if (is(o.length)){\n      // Indexed arrays, needed for Safari\n      for (n=0; n<o.length; n++) {\n        if (cb.call(s, o[n], n, o) === false){\n          return 0;\n        }\n      }\n    } else {\n      // Hashtables\n      for (n in o){\n        if (o.hasOwnProperty(n)) {\n          if (cb.call(s, o[n], n, o) === false){\n            return 0;\n          }\n        }\n      }\n    }\n\n    return 1;\n  }\n\n  // Extend object e on to o.\n  function extend(o, e){\n    each(e, function(v, n){\n      o[n] = v;\n    });\n\n    return o;\n  }\n\n\n  function noConflict(){\n    root.chartstack = previousChartstack;\n    return this;\n  }\n\n  // DOM-ready queue method.\n  function ready(cb){\n    if (!isDomReady){\n      readyCallbacks.push(cb);\n    }else{\n      cb();\n    }\n  }\n\n  // Called when DOM and chart libs are loaded and ready.\n  function bootstrap (){\n    // If graph library isn't set in defaults, match provider to the first graph\n    // lib found on the page that we have an adapter for.\n    if (chartstack.defaults.library){\n      chartstack.library = chartstack.defaults.library;\n    }else{\n      each(Object.keys(chartstack.renderers), function(ns){\n        if (ns in window){\n          chartstack.library = ns;\n          return false;\n        }\n      });\n\n      if (!chartstack.library){\n        throw new Error('No charting library located.');\n      }\n\n      // Parse the dom.\n      chartstack.parse();\n\n      isDomReady = true;\n      each(readyCallbacks, function(cb){\n        cb();\n      });\n    }\n  }\n\n  // Parse the DOM and search for valid charting elements to turn to classes.\n  function parse(){\n    var chartNodes = document.querySelectorAll('piechart,barchart,linechart');\n    each(chartNodes, function(el){\n      // Ensure data attribute exists.\n      if (el.getAttribute('datasource')){\n        new Chart(el);\n      }\n    });\n  }\n\n  function getAjax(url, cb){\n    var xhr;\n    var createXHR = function(){\n      var xhr;\n      if (window.ActiveXObject){\n        try{\n          xhr = new ActiveXObject(\"Microsoft.XMLHTTP\");\n        }catch(e){\n          console.warn(e.message);\n          xhr = null;\n        }\n      }else{\n        xhr = new XMLHttpRequest();\n      }\n      return xhr;\n    };\n\n    xhr = createXHR();\n    xhr.onreadystatechange = function(){\n      if (xhr.readyState === 4){\n        cb(xhr.responseText);\n      }\n    };\n    xhr.open('GET', url, true);\n    xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n    xhr.send();\n  }\n\n  // Returns a chartstack object by html element id or element comparison.\n  function get(strOrEl){\n    var el = strOrEl.nodeName ? strOrEl : document.querySelector(strOrEl);\n    var matchedChart;\n\n    if (el){\n      each(chartstack.charts, function(chart){\n        if (el == chart.el){\n          matchedChart = chart;\n          return false;\n        }\n      });\n      return matchedChart;\n    }\n    throw(\"That element doesn't exist on the page.\");\n  }\n\n  // Adapters that normalize 3rd party api to a standard format.\n  function addAdapter(domain, configObj){\n    if (chartstack.is(configObj, 'function')){\n      adapters[domain] = configObj;\n    }else{\n      each(configObj, function(func, type){\n        // If domain doesn't exist, create the namespace.\n        if (!adapters[domain]){\n          adapters[domain] = {};\n        }\n        adapters[domain][type] = func;\n\n      });\n    }\n  }\n\n  // Chart specific Renderers that Chartstack uses to render charts.\n  function addRenderer(provider, configObj){\n    each(configObj, function(func, type){\n      if (!renderers[provider]){\n        renderers[provider] = {};\n      }\n\n      renderers[provider][type] = func;\n    });\n  }\n\n  // Rendersets are chart library-related renderer and adapters.\n  function addRenderSet(configObj){\n    var libfullName = configObj.name;\n    var libNamespace = configObj.namespace;\n\n    chartstack.addRenderer(libNamespace, configObj.render)\n    chartstack.addAdapter(libNamespace, configObj.adapter)\n  }\n\n\n  // Methods that transform non-JSON data to JSON.\n  function addTransformer(name, func){\n    transformers[name] = func;\n  }\n\n  // Placeholder for chartstack data adapters.\n  chartstack.adapters = adapters = {};\n\n  // Placeholder for chartstack renderers.\n  chartstack.renderers = renderers = {};\n\n  // Array of instantiated charts.\n  chartstack.charts = charts = [];\n\n  // Placeholder for transform data adapters.\n  chartstack.transformers = transformers = {\n    json : function(data){\n      if (typeof data == 'string'){\n        return JSON.parse(data);\n      }else{\n        return data;\n      }\n    }\n  };\n\n  // Store them in API as well for plugin use.\n  extend(chartstack, {\n    noConflict : noConflict,\n    parse : parse,\n    is : is,\n    each : each,\n    extend : extend,\n    getAjax : getAjax,\n    ready: ready,\n    get: get,\n    addAdapter : addAdapter,\n    addRenderer : addRenderer,\n    addRenderSet : addRenderSet,\n    addtransformer : addTransformer\n  });\n\n  // Defaults accessible from outside in case user wants to change them.\n  // DOM properties override defaults.\n  chartstack.defaults = {\n    labels: true\n  };\n\n  chartstack.DataAdapter = Adapter = function(){\n  };\n\n  // Chartstack generic Event class.\n  chartstack.Event = Event = function(){\n    this.allEvents = {};\n  };\n\n  extend(Event.prototype, {\n    on: function(eventName, cb){\n      if (!(eventName in this.allEvents)){\n        this.allEvents[eventName] = [];\n      }\n      this.allEvents[eventName].push(cb);\n    },\n\n    off: function(eventName, cb){\n      if (!eventName && !cb){\n        this.allEvents = {};\n      }\n      if (cb){\n        var match = this.allEvents[eventName].indexOf(cb);\n        if (match){\n          this.allEvents[eventName].splice(match, 1);\n        }\n\n      }else{\n        delete this.allEvents[eventName];\n      }\n    },\n\n    trigger: function(eventName){\n      var self = this;\n      var args = Array.prototype.slice.call(arguments, 0);\n      args.shift();\n\n      if (eventName in this.allEvents){\n        this.allEvents[eventName].forEach(function(cb){\n          cb.apply(self, args);\n        });\n      }\n    }\n  });\n\n\n\n\n  // DataResource class\n  // -----------------------------\n  chartstack.DataResource = function(config){\n    // Types: String (Data or URL), Object\n    if (typeof config === \"string\") {\n      if (config.match(/^({|\\[)/)) {\n        // Raw Data\n        this.response = JSON.parse(config);\n      } else {\n        // URL + Params\n        this.url = config;\n      }\n    } else {\n      for (var option in config) {\n        this[option] = config[option];\n      }\n    }\n    this.configure();\n  };\n\n  chartstack.DataResource.prototype = {\n    configure: function(){\n      if (this.url !== void 0 && this.url.indexOf(\"?\") !== -1 && this.params == void 0) {\n        this.params = parseParams(this.url);\n        this.url = this.url.split(\"?\")[0];\n      }\n      console.log('New Resource', this);\n      return this;\n    },\n    get: function(attribute){\n      return this.params[attribute] || null;\n    },\n    set: function(attributes){\n      for (var attribute in attributes) {\n        this.params[attribute] = attributes[attribute];\n      }\n      return this;\n    }\n  };\n\n\n  // Dataset class\n  // -----------------------------\n  chartstack.Dataset = function(config){\n    var resources = [], config = config || {};\n    if (config instanceof Array) {\n      each(config, function(source){\n        resources.push(new chartstack.DataResource(source));\n      });\n    } else {\n      resources.push(new chartstack.DataResource(config));\n    }\n    this.resources = resources;\n    return;\n  };\n\n  chartstack.Dataset.prototype = {\n\n    fetch: function(){\n      var self = this, responses = [], completions = 0;\n      var finish = function(response, index){\n        //console.log(response.result);\n        responses[index] = JSON.parse(response);\n        adapters['keen-io'].call(self.resources[index], responses[index]);\n\n        completions++;\n        if (completions == self.resources.length){\n          console.log('complete', responses);\n        }\n      };\n      var error = function(){\n        console.log('error');\n      };\n      each(self.resources, function(resource, index){\n        var url = resource.url + buildQueryString(resource.params);\n        var successSequencer = function(response){\n          finish(response, index)\n        };\n        chartstack.getAjax(url, successSequencer, error);\n        //getJSONP(url, successSequencer);\n      });\n      return self;\n    },\n\n    at: function(index){\n      //if (typeof index == \"string\") {\n      //  return this.resources where\n      //}\n      return this.resources[index] || null;\n    }\n\n  };\n\n  function buildQueryString(params){\n    var query = [];\n    for (var key in params) {\n      if (params[key]) {\n        var value = params[key];\n        if (Object.prototype.toString.call(value) !== '[object String]') {\n          value = JSON.stringify(value);\n        }\n        value = encodeURIComponent(value);\n        query.push(key + '=' + value);\n      }\n    }\n    return \"?\" + query.join('&');\n  }\n\n  function parseParams(str){\n    // via http://stackoverflow.com/a/2880929/2511985\n    var urlParams = {},\n        match,\n        pl     = /\\+/g,  // Regex for replacing addition symbol with a space\n        search = /([^&=]+)=?([^&]*)/g,\n        decode = function (s) { return decodeURIComponent(s.replace(pl, \" \")); },\n        query  = str.split(\"?\")[1];\n\n    while (match = search.exec(query))\n      urlParams[decode(match[1])] = decode(match[2]);\n\n    return urlParams;\n  }\n\n  function getJSONP(url, success, error){\n    // JSONP\n    var callbackName = \"ChartstackJSONPCallback\" + new Date().getTime();\n    while (callbackName in window) {\n      callbackName += \"a\";\n    }\n    var loaded = false;\n    window[callbackName] = function (response) {\n      loaded = true;\n      if (success && response) {\n        success(response);\n      };\n      // Remove this from the namespace\n      window[callbackName] = undefined;\n    };\n    url = url + \"&jsonp=\" + callbackName;\n    var script = document.createElement(\"script\");\n    script.id = \"chartstack-jsonp\";\n    script.src = url;\n    document.getElementsByTagName(\"head\")[0].appendChild(script);\n    // for early IE w/ no onerror event\n    script.onreadystatechange = function() {\n      if (loaded === false && this.readyState === \"loaded\") {\n        loaded = true;\n        if (error) error();\n      }\n    };\n    // non-ie, etc\n    script.onerror = function() {\n      if (loaded === false) { // on IE9 both onerror and onreadystatechange are called\n        loaded = true;\n        if (error) error();\n      }\n    }\n  }\n\n\n\n\n\n  // Main Chart class.\n  chartstack.Chart = Chart = function(args) {\n    var $chart = this;\n    // Add to internal array.\n    chartstack.charts.push(this);\n\n    // Collects properties off DOM element and inspects data source.\n\n    function setup(){\n      var setupDom, setupJS, domain;\n\n      setupDom = function(){\n        $chart.el = args;\n\n        // Type of chart.\n        $chart.chartType = $chart.el.nodeName.toLocaleLowerCase();\n\n        // Our made up HTML nodes are display: inline so we need to make\n        // them block;\n        $chart.el.style.display = \"inline-block\";\n      };\n\n      setupJS = function(){\n        $chart.el = args.el;\n\n        // Type of chart.\n        $chart.chartType = args.chartType;\n      };\n\n      // Copy global defaults on to this chart.\n      each(chartstack.defaults, function(k, v){\n        $chart[v] = k;\n      });\n\n      if ('nodeType' in args){\n        setupDom();\n      }else{\n        setupJS();\n      }\n\n      // Find properties on dom element to override defaults.\n      // Support arrays here so we can store the data under a different name.\n      // TODO: These strings should be objects with support for defaults and other options.\n      each([\n        ['provider', 'domain'],\n        'datasource',\n        'dataformat',\n        'library',\n        'labels',\n        'width',\n        'height',\n        'title',\n        'titleTextColor', // Custom, currently supported on Google  TODO: NVD3\n        'legendColor', // Custom, currently supported on Google TODO: NVD3\n        'colors', // item colors - Supported for all chart types for Google and NVD3.\n        'pieSliceBorderColor', // TODO: Pie only  TODO: NVD3\n        'pieSliceTextColor', // TODO: Pie only  TODO: NVD3\n        'backgroundColor', // Bg color of chart.  TODO: NVD3\n        'customOptions',\n        // methods\n        'formatRowLabel' // Pie labels, xlabels on other charts.\n      ], function(attr){\n        var test, newKey;\n\n        if (is(attr, 'object')){\n          newKey = attr[1];\n          attr = attr[0];\n        }\n        test = args.nodeType ? args.getAttribute(attr) : args[attr];\n        // If property exists, save it.\n        if (test){\n          // Support for real booleans.\n          if (test == 'false' || test == '0' || test == 'off'){\n            test = false;\n          }else if (test == 'true' || test == '1' || test == \"on\"){\n            test = true;\n          }\n\n          if (newKey){\n            $chart[newKey] = test;\n          }else{\n            $chart[attr] = test;\n          }\n        }\n      });\n\n      // If we don't have a localized library set on this chart then set the\n      // global one.\n      if (!$chart.library){\n        $chart.library = chartstack.library;\n      }\n\n      // Used to transform response if needed to JSON.\n      if (!$chart.dataformat){\n        $chart.dataformat = 'json';\n      }\n\n      // Run library renderer's init if the lib needs to do some setup.\n      if (renderers[$chart.library] && renderers[$chart.library].init){\n        renderers[$chart.library].init($chart);\n      }\n\n      // Check datasource starts with { or [ assume it's JSON or else\n      // assume it's a URL to fetch.  We do not check for http anymore\n      // as it can be a local/relative file.\n      if (typeof $chart.datasource == 'string'){\n        $chart.dataset = new chartstack.Dataset($chart.datasource);\n        if ($chart.datasource.match(/^({|\\[)/)){\n          $chart.datasource = JSON.parse($chart.datasource);\n        }else{\n          domain = $chart.datasource.match(/\\/\\/(.*?)\\//);\n          if (domain){\n            $chart.domain = domain[1];\n          }\n        }\n      }\n    }\n\n    // Fetches and normalizes data with a callback to pass data to.\n    function fetch(cb){\n      function finish(data){\n\n        // Transform data from CSV, etc, to JSON.\n        if ($chart.dataformat in transformers){\n          data = transformers[$chart.dataformat](data);\n        }else{\n          throw new Error('Transformer for datatype missing: ' + $chart.dataformat);\n        }\n\n        // If domain specified, check if we have adapters for this domain and\n        // that we also have a chart adapter for this chart from this domain.\n        if (adapters[$chart.domain] && adapters[$chart.domain][$chart.chartType]){\n          data = adapters[$chart.domain][$chart.chartType].call(new Adapter, data);\n        }\n\n        // TODO: Put this in a modular place. Probably in adapter object post init.\n        if ($chart.formatRowLabel){\n          chartstack.each(data.data, function(key, i){\n            if (i == 0){ return;}\n            data.data[i][0] = $chart.formatRowLabel(key[0]);\n          });\n        }\n\n        // Transform data into graph libs format using graph library's data\n        // adapter. Data adapter can be one method or an object of methods of\n        // chart types depending on how the chart library handles data.\n        if (chartstack.is(adapters[$chart.library], 'function')){\n          data = adapters[$chart.library].call(new Adapter, data);\n        }else{\n          data = adapters[$chart.library][$chart.chartType].call(new Adapter, data);\n        }\n        cb(data);\n      }\n\n      // If this is a URL fetch data.\n      if (typeof $chart.datasource == \"string\"){\n        chartstack.getAjax($chart.datasource, finish);\n\n        // The data is local.\n      }else{\n        finish($chart.datasource);\n      }\n    }\n\n    setup();\n    fetch(function(data){\n      var renderer = chartstack.renderers[$chart.library];\n      if (!renderer){\n        throw('Renderer for ' + $chart.library + ' is missing.');\n      }else if(!renderer[$chart.chartType]){\n        throw('Renderer for ' + $chart.library + ':' + $chart.chartType + ' is missing.');\n      }\n\n      // Render chart using data.\n      renderer[$chart.chartType]($chart, data);\n    });\n\n    // Public methods\n    extend($chart, {\n      show : function(){\n        $chart.trigger('show');\n      },\n\n      hide : function(){\n        $chart.trigger('hide');\n      },\n\n      draw: function(){\n        $chart.trigger('draw');\n      },\n\n      fetch : function(cb){\n        cb || (cb = function(){});\n        fetch(cb);\n      }\n    });\n  };\n\n  // Add Event support to Chart class.\n  Chart.prototype = new chartstack.Event();\n\n  // Hack to support google charts.\n  if (window.google){\n    google.load('visualization', '1.0', {'packages':['corechart']});\n    google.setOnLoadCallback(bootstrap);\n  }else{\n    document.addEventListener(\"DOMContentLoaded\", bootstrap);\n  }\n})(this);\n","/* global chartstack */\n(function(cs){\n  console.log(\"hereereerer\");\n  var proto;\n  var each = chartstack.each;\n\n  cs.dataform = function(data, map) {\n    this.build(data, map);\n  };\n\n  proto = cs.dataform.prototype;\n\n  proto.build = function(data, map) {\n\n    // map.root\n    // map.each.index\n    // map.each.label\n    // map.each.value\n\n    var self = this,\n    root = data[map.root];\n\n    self.map = map,\n    self.table = [],\n    self.series = [],\n    self.raw = data;\n\n    self.cols = (function(){\n      var split_index = self.map.each.index.split(\" -> \");\n      var split_value = self.map.each.value.split(\" -> \");\n      var output = {\n        fixed: [split_index[split_index.length-1]]\n      };\n      if (self.map.each.label) {\n        output['cells'] = self.map.each.label;\n      } else {\n        output['fixed'].push(split_value[split_value.length-1]);\n      }\n      return output;\n    })();\n\n    self.rows = {\n      index: self.map.each.index.split(\" -> \"),\n      cells: self.map.each.value.split(\" -> \")\n    };\n\n    self.order = {\n      rows: ['date', 'asc'],\n      cols: ['number', 'desc']\n    };\n\n    // SORT ROWS\n    if (self.order.rows.length > 0) {\n      root.sort(function(a, b){\n        var aIndex = parse.apply(self, [a].concat(self.rows.index));\n        var bIndex = parse.apply(self, [b].concat(self.rows.index));\n\n        if (self.order.rows[1] == 'asc') {\n          if (aIndex > bIndex){return 1;}\n          if (aIndex < bIndex){return -1;}\n          return 0;\n        } else {\n          if (aIndex > bIndex){return -1;}\n          if (aIndex < bIndex){return 1;}\n          return 0;\n        }\n\n        return false;\n      });\n    }\n\n    // ADD SERIES\n    (function(){\n\n      self.cols.label = (self.cols.fixed) ? self.cols.fixed[0] : 'series';\n      var fixed = (self.cols.fixed) ? self.cols.fixed : [];\n      var cells = (self.cols.cells) ? parse.apply(self, [root[0]].concat(self.cols.cells)) : [];\n      var output = fixed.concat(cells);\n      output.splice(0,1);\n\n      each(output, function(el){\n        self.series.push({ key: el, values: [] });\n      });\n    })();\n\n    // ADD SERIES' RECORDS\n    each(root, function(el){\n      var index = parse.apply(self, [el].concat(self.rows.index));\n      var cells = parse.apply(self, [el].concat(self.rows.cells));\n\n      each(cells, function(cell, j){\n        var output = {};\n        output[self.cols.label] = index[0];\n        output.value = cell;\n        self.series[j].values.push(output);\n      });\n    });\n\n    // SORT COLUMNS\n    if (self.order.cols.length > 0) {\n      self.series = self.series.sort(function(a, b){\n        var aTotal = 0;\n        var bTotal = 0;\n        each(a.values, function(record){\n          aTotal += record.value;\n        });\n        each(b.values, function(record){\n          bTotal += record.value;\n        });\n\n        if (self.order.cols[1] == 'asc') {\n          return aTotal - bTotal;\n        } else {\n          return bTotal - aTotal;\n        }\n      });\n    }\n\n    // BUILD TABLE\n    self.table = [];\n    self.table.push([self.cols.label]);\n\n    each(self.series[0].values, function(value){\n      self.table.push([value[self.cols.label]]);\n    });\n\n    each(self.series, function(series){\n      self.table[0].push(series.key);\n      each(series.values, function(record, j){\n        self.table[j+1].push(record.value);\n      });\n    });\n\n    // COLUMN TRANSFORMS\n    if (setup.cols.transform) {\n      for (var transform in setup.cols.transform) {\n        if (transform == 'all') {\n          each(self.table[0], function(column, index){\n            if (index > 0) {\n              self.table[0][index] = setup.cols.transform[transform](self.table[0][index]);\n            }\n          });\n        } else {\n          transform = parseInt(transform);\n          if (self.table[0].length > transform) {\n            self.table[0][transform] = setup.cols.transform[transform](self.table[0][transform]);\n          }\n        }\n      }\n    }\n\n    // ROW TRANSFORMS\n    if (setup.rows.transform) {\n      each(self.table, function(row, index){\n        if (index > 0) {\n          for (var transform in setup.rows.transform) {\n            self.table[index][transform] = setup.rows.transform[transform](self.table[index][transform]);\n          }\n        }\n      });\n    }\n\n    return this;\n  };\n\n  function parse() {\n    var result = [];\n    var loop = function() {\n      var root = arguments[0];\n      var args = Array.prototype.slice.call(arguments, 1);\n      var target = args.pop();\n\n      if (args.length === 0) {\n        if (root instanceof Array) {\n          args = root;\n        } else if (typeof root === 'object') {\n          args.push(root);\n        }\n      }\n\n      each(args, function(el){\n\n        if (el[target] || el[target] == 0 || el[target] !== void 0) {\n          // Easy grab!\n          if (el[target] === null) {\n            return result.push('');\n          } else {\n            return result.push(el[target]);\n          }\n\n        } else if (root[el]){\n          if (root[el] instanceof Array) {\n            // dive through each array item\n\n            each(root[el], function(n, i) {\n              var splinter = [root[el]].concat(root[el][i]).concat(args.slice(1)).concat(target);\n              return loop.apply(this, splinter);\n            });\n\n          } else {\n            if (root[el][target]) {\n              // grab it!\n              return result.push(root[el][target]);\n\n            } else {\n              // dive down a level!\n              return loop.apply(this, [root[el]].concat(args.splice(1)).concat(target));\n\n            }\n          }\n\n        } else {\n          // dive down a level!\n          return loop.apply(this, [el].concat(args.splice(1)).concat(target));\n\n        }\n\n        return;\n\n      });\n      if (result.length > 0) {\n        return result;\n      }\n    };\n    return loop.apply(this, arguments);\n  }\n\n})(chartstack);\n","/* global chartstack */\n// Data normalizing adaper for keen.io API.\n(function(cs){\n\n  cs.addAdapter('keen-io', function(response){\n    var data, map = this.map || false;\n    console.log(\"map\", map);\n\n    if (map) {\n      data = new cs.dataform(response, map);\n      return {\n        data: data.table,\n        extras: {}\n      }\n    }\n  });\n\n  cs.addAdapter('api.keen.io', {\n    piechart: function(data){\n      data = new cs.diver(data.result, {\n        cols: {\n          fixed: ['Browser', 'Share']\n        },\n        rows: {\n          index: 'platform',\n          cells: 'result'\n        }\n      });\n\n      return {\n        data: data.table,\n        extras: {}\n      };\n    },\n\n    barchart: function(data){\n      data = new cs.diver(data.result, {\n        cols: {\n          fixed: ['Date'],\n          cells: 'value -> platform'\n        },\n        rows: {\n          index: 'timeframe -> start',\n          cells: 'value -> result',\n          transform: {\n            0: function(value){\n              return new Date(value);\n            }\n          }\n        }\n      });\n\n      return {\n        data: data.table,\n        extras: {}\n      };\n    },\n\n    linechart: function(data){\n      var diverFormat;\n\n      if(data.result[0].value instanceof Array){\n        diverFormat = {\n          cols: {\n            fixed: ['Date'],\n            cells: 'value -> platform'\n          },\n          rows: {\n            index: 'timeframe -> start',\n            cells: 'value -> result',\n            transform: {\n              0: function(value){\n                return new Date(value);\n              }\n            }\n          }\n        }\n      }else{\n        diverFormat = {\n          cols: {\n            fixed: ['Date', 'Value']\n          },\n          rows: {\n            index: 'timeframe -> start',\n            cells: 'value',\n            transform: {\n              0: function(value){\n                return new Date(value);\n              }\n            }\n          }\n        }\n      }\n\n      data = new cs.diver(data.result, diverFormat);\n\n      return {\n        data: data.table,\n        extras: {}\n      };\n    }\n  });\n})(chartstack);\n","/* global google, chartstack */\n(function(cs){\n  cs.addRenderSet({\n    name: 'Google Charts',\n    namespace: 'google',\n\n    // Adapts data from UD format to library format.\n    adapter: function(data){\n      return google.visualization.arrayToDataTable(data.data);\n    },\n\n    // Renders DOM charts.\n    render: {\n      piechart: function($chart, data){\n        var chart, options;\n        var each = cs.each;\n        var extend = cs.extend;\n\n        // Set chart options\n        options = {\n          'title': $chart.title || '',\n          'width': parseInt($chart.width),\n          'height': parseInt($chart.height)\n        };\n\n        if ($chart.customOptions){\n          extend(options, $chart.customOptions);\n        }\n\n        each(['backgroundColor', 'pieSliceBorderColor', 'colors'], function(prop){\n          if (prop in $chart){\n            options[prop] = $chart[prop];\n          }\n        });\n\n        if ('pieSliceTextColor' in $chart){\n          options.pieSliceTextStyle = {\n            color: $chart.pieSliceTextColor\n          };\n        }\n\n        if ('titleTextColor' in $chart){\n          options.titleTextStyle = {\n            color: $chart.titleTextColor\n          };\n        }\n\n        if ('legendColor' in $chart){\n          options.legend = {\n            textStyle: {\n              color: $chart.legendColor\n            }\n          };\n        }\n\n        chart = new google.visualization.PieChart($chart.el);\n        chart.draw(data, options);\n      },\n\n      barchart: function($chart, data){\n        var chart, options;\n        var each = cs.each;\n        var extend = cs.extend;\n\n        // Set chart options\n        options = {\n          title: $chart.title || '',\n          'width': parseInt($chart.width),\n          'height': parseInt($chart.height)\n        };\n\n        each(['backgroundColor', 'pieSliceBorderColor', 'colors'], function(prop){\n          if (prop in $chart){\n            options[prop] = $chart[prop];\n          }\n        });\n\n        if ('titleTextColor' in $chart){\n          options.titleTextStyle = {\n            color: $chart.titleTextColor\n          };\n        }\n\n        if ('legendColor' in $chart){\n          options.legend = {\n            textStyle: {\n              color: $chart.legendColor\n            }\n          };\n        }\n\n        chart = new google.visualization.BarChart($chart.el);\n        chart.draw(data, options);\n      },\n\n      linechart: function($chart, data){\n        var chart, options;\n        var each = cs.each;\n        var extend = cs.extend;\n\n        // Set chart options\n        options = {\n          title: $chart.title || '',\n          'width': parseInt($chart.width),\n          'height': parseInt($chart.height)\n        };\n\n        each(['backgroundColor', 'pieSliceBorderColor', 'colors'], function(prop){\n          if (prop in $chart){\n            options[prop] = $chart[prop];\n          }\n        });\n\n        if ('titleTextColor' in $chart){\n          options.titleTextStyle = {\n            color: $chart.titleTextColor\n          };\n        }\n\n        if ('legendColor' in $chart){\n          options.legend = {\n            textStyle: {\n              color: $chart.legendColor\n            }\n          };\n        }\n\n        chart = new google.visualization.LineChart($chart.el);\n        chart.draw(data, options);\n      }\n    }\n  });\n\n})(chartstack);\n","/* global chartstack */\n(function(cs){\n  cs.addRenderSet({\n    name: 'NVD3',\n    namespace: 'nv',\n\n    // Adapts data from UD format to library format.\n    adapter: {\n      piechart: function(data){\n        data = data.data;\n\n        var ar = [];\n\n        // Pop off unused header array.\n        data.shift();\n\n        cs.each(data, function(item){\n          var entry = {\n            label: item[0],\n            value: item[1]\n          };\n          ar.push(entry);\n        });\n        return ar;\n      },\n\n      barchart: function(data){\n        data = data.data;\n\n        var each = cs.each;\n        var section = [];\n        var colomnKeys = data.shift();\n        var rowDescription = colomnKeys.shift();\n\n        // Prep rows\n        each(colomnKeys, function(name){\n          section.push({\n            key: name,\n            values: []\n          });\n        });\n\n        each(data, function(selection){\n          var rowDesc = selection.shift();\n          each(selection, function(y, a){\n            section[a].values.push({\n              x: rowDesc,\n              y: y\n            });\n          });\n        });\n\n        return {\n          result: section,\n          options: {\n            rowDescription: rowDescription\n          }\n        };\n      },\n\n      linechart: function(data){\n        data = data.data;\n\n        var each = cs.each;\n        var section = [];\n        var colomnKeys = data.shift();\n        var rowDescription = colomnKeys.shift();\n\n        // Prep rows\n        each(colomnKeys, function(name){\n          section.push({\n            key: name,\n            values: []\n          });\n        });\n\n        each(data, function(selection){\n          var rowDesc = selection.shift();\n          each(selection, function(y, a){\n            section[a].values.push([rowDesc, y]);\n          });\n        });\n\n        return {\n          result: section,\n          options: {\n            rowDescription: rowDescription\n          }\n        };\n      }\n    },\n\n    // Renders DOM charts.\n    render: {\n      init: function($chart){\n        // Create the SVG element that D3 needs.\n        $chart.svg = document.createElementNS ('http://www.w3.org/2000/svg', 'svg');\n        // Set height and width of SVG to it's parent's container.\n        cs.each(['width', 'height'], function(m){\n          var v = parseInt($chart[m]);\n          $chart[m] = v;\n          $chart.svg.setAttributeNS(null, m, v);\n        });\n\n        $chart.el.appendChild($chart.svg);\n      },\n\n      piechart: function($chart, data){\n\n        // Regular pie chart example\n        nv.addGraph(function() {\n          var chart = nv.models.pieChart()\n            .x(function(d) { return d.label; })\n            .y(function(d) { return d.value; })\n            .showLabels($chart.labels);\n\n          if ('colors' in $chart){\n            chart.color($chart.colors);\n          }\n\n          d3.select($chart.svg)\n            .datum(data)\n            .transition().duration(350)\n            .call(chart);\n\n          return chart;\n        });\n      },\n\n      barchart: function($chart, data){\n        nv.addGraph(function() {\n          var chart = nv.models.multiBarChart();\n\n          // Required to set the height once more or it's too small.\n          chart.width($chart.width).height($chart.height);\n\n          if (data.result[0].values[0].x instanceof Date){\n            chart.xAxis\n              .tickFormat(function(d) {\n                return d3.time.format('%b %d')(new Date(d));\n              });\n          }else{\n            chart.xAxis\n              .tickFormat(d3.format('f'));\n          }\n\n          if ('colors' in $chart){\n            chart.color($chart.colors);\n          }\n\n          chart.yAxis\n          //.axisLabel('Count')\n            .tickFormat(d3.format(',f'));\n\n          d3.select($chart.svg)\n            .datum(data.result)\n            .transition().duration(500)\n            .call(chart);\n\n          nv.utils.windowResize(chart.update);\n        });\n      },\n\n      linechart: function($chart, data){\n        var chart = nv.models.lineChart()\n          .x(function(d) { return d[0]; })\n          .y(function(d) { return d[1]; })\n          .color(d3.scale.category10().range())\n          .useInteractiveGuideline(true);\n\n        if (data.result[0].values[0][0] instanceof Date){\n          chart.xAxis\n            .tickFormat(function(d) {\n              return d3.time.format('%b %d')(new Date(d));\n            });\n        }else{\n          chart.xAxis\n            .tickFormat(d3.format('f'));\n        }\n\n        if ('colors' in $chart){\n          chart.color($chart.colors);\n        }\n\n        //chart.xAxis\n        //  .tickFormat(function(d) {\n        //    return d3.time.format('%x')(new Date(d));\n        //  });\n\n        chart.yAxis\n          .tickFormat(d3.format(',g'));\n\n        d3.select($chart.svg)\n          .datum(data.result)\n          .call(chart);\n\n        chart.width($chart.width).height($chart.height).update();\n        nv.utils.windowResize(chart.update);\n        return chart;\n      }\n\n    }\n\n  });\n})(chartstack);\n","/* global google, chartstack */\n(function(cs){\n  cs.addRenderSet({\n    name: 'Highcharts',\n    namespace: 'Highcharts',\n\n    // Adapts data from UD format to library format.\n    adapter: {\n      piechart: function(data){\n        data = data.data;\n        var headers = data.shift();\n\n        return {\n          type: 'pie',\n          name: headers.join(' '),\n          data: data\n        };\n      },\n\n      barchart: function(data){\n        data = data.data;\n\n        var each = cs.each;\n        var section = [];\n        var colomnKeys = data.shift();\n        var rowDescription = colomnKeys.shift();\n        var categories = [];\n\n        // Prep rows\n        each(colomnKeys, function(name){\n          section.push({\n            name: name,\n            data: []\n          });\n        });\n\n        each(data, function(selection){\n          categories.push(selection.shift());\n          each(selection, function(y, a){\n            section[a].data.push(y);\n          });\n        });\n\n        return {\n          result: section,\n          options: {\n            categories: categories,\n            rowDescription: rowDescription\n          }\n        };\n      },\n\n      linechart: function(data){\n        data = data.data;\n\n        var each = cs.each;\n        var section = [];\n        var colomnKeys = data.shift();\n        var rowDescription = colomnKeys.shift();\n        var categories = [];\n\n        // Prep rows\n        each(colomnKeys, function(name){\n          section.push({\n            name: name,\n            data: []\n          });\n        });\n\n        each(data, function(selection){\n          categories.push(selection.shift());\n          each(selection, function(y, a){\n            section[a].data.push(y);\n          });\n        });\n        return {\n          result: section,\n          options: {\n            categories: categories,\n            rowDescription: rowDescription\n          }\n        };\n      }\n    },\n\n    // Renders DOM charts.\n    render: {\n\n      piechart: function($chart, data){\n        return new Highcharts.Chart({\n          chart: {\n            renderTo: $chart.el,\n            type: 'pie',\n            plotBackgroundColor: null,\n            plotBorderWidth: null,\n            plotShadow: false\n          },\n          title: {\n            text: $chart.title || ''\n          },\n\n          //tooltip: {\n          //  pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'\n          //},\n\n          plotOptions: {\n            pie: {\n              allowPointSelect: true,\n              cursor: 'pointer',\n              dataLabels: {\n                enabled: true,\n                color: '#000000',\n                connectorColor: '#000000',\n                formatter: function() {\n                  return '<b>'+ this.point.name +'</b>: '+ this.percentage +' %';\n                }\n              }\n            }\n          },\n\n          series: [data]\n        });\n      },\n\n      barchart: function($chart, data){\n        return new Highcharts.Chart({\n          chart: {\n            renderTo: $chart.el,\n            type: 'bar',\n            plotBackgroundColor: null,\n            plotBorderWidth: null,\n            plotShadow: false\n          },\n          title: {\n            text: $chart.title || ''\n          },\n          xAxis: {\n            title: {\n              text: data.options.rowDescription\n            },\n            labels: {\n              // format: '{value:%m-%d}'\n            },\n            categories: data.options.categories\n          },\n          yAxis: {\n            min: 0,\n            title: {\n              align: 'high'\n            },\n            labels: {\n              overflow: 'justify'\n            }\n          },\n          //tooltip: {\n          //  valueSuffix: ' millions'\n          //},\n          plotOptions: {\n            bar: {\n              dataLabels: {\n                enabled: true\n              }\n            }\n          },\n          legend: {\n            layout: 'vertical',\n            align: 'right',\n            verticalAlign: 'top',\n            x: -40,\n            y: 100,\n            floating: true,\n            borderWidth: 1,\n            backgroundColor: '#FFFFFF',\n            shadow: true\n          },\n          credits: {\n            enabled: false\n          },\n          series: data.result\n        });\n      },\n\n      linechart: function($chart, data){\n        return new Highcharts.Chart({\n          chart: {\n            renderTo: $chart.el,\n            type: 'line',\n            plotBackgroundColor: null,\n            plotBorderWidth: null,\n            plotShadow: false\n          },\n          title: {\n            text: $chart.title || '',\n            x: -20 //center\n          },\n          xAxis: {\n            categories: data.options.categories,\n            title: {\n              text: data.options.rowDescription\n            }\n          },\n          yAxis: {\n            title: {\n              // text: 'Temperature (°C)'\n            },\n            plotLines: [{\n              value: 0,\n              width: 1,\n              color: '#808080'\n            }]\n          },\n          //tooltip: {\n          //  valueSuffix: '°C'\n          //},\n          legend: {\n            layout: 'vertical',\n            align: 'right',\n            verticalAlign: 'middle',\n            borderWidth: 0\n          },\n          series: data.result\n        });\n      }\n    }\n  });\n\n})(chartstack);\n"]}