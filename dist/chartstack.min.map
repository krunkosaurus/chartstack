{"version":3,"file":"chartstack.min.js","sources":["../src/chartstack.js","../src/util/chartstack.diver.js","../src/adapter/chartstack.keen.universal.adapter.js","../src/renderset/chartstack.googlecharts.renderset.js","../src/renderset/chartstack.nvd3.renderset.js","../src/renderset/chartstack.highcharts.renderset.js"],"names":["root","is","o","t","each","cb","s","n","length","call","hasOwnProperty","extend","e","v","noConflict","chartstack","previousChartstack","this","ready","isDomReady","readyCallbacks","push","bootstrap","defaults","library","Object","keys","renderers","ns","window","Error","parse","chartNodes","document","querySelectorAll","el","getAttribute","Chart","getAjax","url","xhr","createXHR","ActiveXObject","console","warn","message","XMLHttpRequest","onreadystatechange","readyState","responseText","open","setRequestHeader","send","get","strOrEl","matchedChart","nodeName","querySelector","charts","chart","addAdapter","domain","configObj","adapters","func","type","addRenderer","provider","addRenderSet","libNamespace","name","namespace","render","adapter","addTransformer","transformers","Adapter","Event","Dataset","json","data","JSON","addtransformer","labels","DataAdapter","allEvents","prototype","on","eventName","off","match","indexOf","splice","trigger","self","args","Array","slice","arguments","shift","forEach","apply","option","config","log","flatten","setup","setupDom","setupJS","$chart","chartType","toLocaleLowerCase","style","display","k","attr","test","newKey","nodeType","dataformat","init","datasource","fetch","finish","formatRowLabel","key","i","renderer","show","hide","draw","google","load","packages","setOnLoadCallback","addEventListener","cs","result","loop","target","pop","splinter","concat","proto","diver","build","cols","label","split","cells","fixed","rows","index","order","table","series","raw","sort","a","b","aIndex","bIndex","output","values","cell","j","value","aTotal","bTotal","record","transform","column","parseInt","row","format","piechart","extras","barchart","Date","linechart","diverFormat","visualization","arrayToDataTable","options","title","width","height","customOptions","prop","pieSliceTextStyle","color","pieSliceTextColor","titleTextStyle","titleTextColor","legend","textStyle","legendColor","PieChart","BarChart","LineChart","ar","item","entry","section","colomnKeys","rowDescription","selection","rowDesc","y","x","svg","createElementNS","m","setAttributeNS","appendChild","nv","addGraph","models","pieChart","d","showLabels","colors","d3","select","datum","transition","duration","multiBarChart","xAxis","tickFormat","time","yAxis","utils","windowResize","update","lineChart","scale","category10","range","useInteractiveGuideline","headers","join","categories","Highcharts","renderTo","plotBackgroundColor","plotBorderWidth","plotShadow","text","plotOptions","pie","allowPointSelect","cursor","dataLabels","enabled","connectorColor","formatter","point","percentage","min","align","overflow","bar","layout","verticalAlign","floating","borderWidth","backgroundColor","shadow","credits","plotLines"],"mappings":"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","sourcesContent":["/* global google */\n(function(root) {\n  var previousChartstack = root.chartstack;\n  var chartstack = root.chartstack = {};\n  var adapters, renderers, charts, Chart, Adapter, Event, transformers, isDomReady, readyCallbacks = [];\n  var Dataset;\n  // These three functions taken from https://github.com/spocke/punymce\n  function is(o, t){\n    o = typeof(o);\n\n    if (!t){\n      return o != 'undefined';\n    }\n\n    return o == t;\n  }\n\n  function each(o, cb, s){\n    var n;\n\n    if (!o){\n      return 0;\n    }\n\n    s = !s ? o : s;\n\n    if (is(o.length)){\n      // Indexed arrays, needed for Safari\n      for (n=0; n<o.length; n++) {\n        if (cb.call(s, o[n], n, o) === false){\n          return 0;\n        }\n      }\n    } else {\n      // Hashtables\n      for (n in o){\n        if (o.hasOwnProperty(n)) {\n          if (cb.call(s, o[n], n, o) === false){\n            return 0;\n          }\n        }\n      }\n    }\n\n    return 1;\n  }\n\n  // Extend object e on to o.\n  function extend(o, e){\n    each(e, function(v, n){\n      o[n] = v;\n    });\n\n    return o;\n  }\n\n\n  function noConflict(){\n    root.chartstack = previousChartstack;\n    return this;\n  }\n\n  // DOM-ready queue method.\n  function ready(cb){\n    if (!isDomReady){\n      readyCallbacks.push(cb);\n    }else{\n      cb();\n    }\n  }\n\n  // Called when DOM and chart libs are loaded and ready.\n  function bootstrap (){\n    // If graph library isn't set in defaults, match provider to the first graph\n    // lib found on the page that we have an adapter for.\n    if (chartstack.defaults.library){\n      chartstack.library = chartstack.defaults.library;\n    }else{\n      each(Object.keys(chartstack.renderers), function(ns){\n        if (ns in window){\n          chartstack.library = ns;\n          return false;\n        }\n      });\n\n      if (!chartstack.library){\n        throw new Error('No charting library located.');\n      }\n\n      // Parse the dom.\n      chartstack.parse();\n\n      isDomReady = true;\n      each(readyCallbacks, function(cb){\n        cb();\n      });\n    }\n  }\n\n  // Parse the DOM and search for valid charting elements to turn to classes.\n  function parse(){\n    var chartNodes = document.querySelectorAll('piechart,barchart,linechart');\n    each(chartNodes, function(el){\n      // Ensure data attribute exists.\n      if (el.getAttribute('datasource')){\n        new Chart(el);\n      }\n    });\n  }\n\n  function getAjax(url, cb){\n    var xhr;\n    var createXHR = function(){\n      var xhr;\n      if (window.ActiveXObject){\n        try{\n          xhr = new ActiveXObject(\"Microsoft.XMLHTTP\");\n        }catch(e){\n          console.warn(e.message);\n          xhr = null;\n        }\n      }else{\n        xhr = new XMLHttpRequest();\n      }\n      return xhr;\n    };\n\n    xhr = createXHR();\n    xhr.onreadystatechange = function(){\n      if (xhr.readyState === 4){\n        cb(xhr.responseText);\n      }\n    };\n    xhr.open('GET', url, true);\n    xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n    xhr.send();\n  }\n\n  // Returns a chartstack object by html element id or element comparison.\n  function get(strOrEl){\n    var el = strOrEl.nodeName ? strOrEl : document.querySelector(strOrEl);\n    var matchedChart;\n\n    if (el){\n      each(chartstack.charts, function(chart){\n        if (el == chart.el){\n          matchedChart = chart;\n          return false;\n        }\n      });\n      return matchedChart;\n    }\n    throw(\"That element doesn't exist on the page.\");\n  }\n\n  // Adapters that normalize 3rd party api to a standard format.\n  function addAdapter(domain, configObj){\n    if (chartstack.is(configObj, 'function')){\n      adapters[domain] = configObj;\n    }else{\n      each(configObj, function(func, type){\n        // If domain doesn't exist, create the namespace.\n        if (!adapters[domain]){\n          adapters[domain] = {};\n        }\n        adapters[domain][type] = func;\n\n      });\n    }\n  }\n\n  // Chart specific Renderers that Chartstack uses to render charts.\n  function addRenderer(provider, configObj){\n    each(configObj, function(func, type){\n      if (!renderers[provider]){\n        renderers[provider] = {};\n      }\n\n      renderers[provider][type] = func;\n    });\n  }\n\n  // Rendersets are chart library-related renderer and adapters.\n  function addRenderSet(configObj){\n    var libfullName = configObj.name;\n    var libNamespace = configObj.namespace;\n\n    chartstack.addRenderer(libNamespace, configObj.render)\n    chartstack.addAdapter(libNamespace, configObj.adapter)\n  }\n\n\n  // Methods that transform non-JSON data to JSON.\n  function addTransformer(name, func){\n    transformers[name] = func;\n  }\n\n  // Placeholder for chartstack data adapters.\n  chartstack.adapters = adapters = {};\n\n  // Placeholder for chartstack renderers.\n  chartstack.renderers = renderers = {};\n\n  // Array of instantiated charts.\n  chartstack.charts = charts = [];\n\n  // Placeholder for transform data adapters.\n  chartstack.transformers = transformers = {\n    json : function(data){\n      if (typeof data == 'string'){\n        return JSON.parse(data);\n      }else{\n        return data;\n      }\n    }\n  };\n\n  // Store them in API as well for plugin use.\n  extend(chartstack, {\n    noConflict : noConflict,\n    parse : parse,\n    is : is,\n    each : each,\n    extend : extend,\n    getAjax : getAjax,\n    ready: ready,\n    get: get,\n    addAdapter : addAdapter,\n    addRenderer : addRenderer,\n    addRenderSet : addRenderSet,\n    addtransformer : addTransformer\n  });\n\n  // Defaults accessible from outside in case user wants to change them.\n  // DOM properties override defaults.\n  chartstack.defaults = {\n    labels: true\n  };\n\n  chartstack.DataAdapter = Adapter = function(){\n  };\n\n  // Chartstack generic Event class.\n  chartstack.Event = Event = function(){\n    this.allEvents = {};\n  };\n\n  extend(Event.prototype, {\n    on: function(eventName, cb){\n      if (!(eventName in this.allEvents)){\n        this.allEvents[eventName] = [];\n      }\n      this.allEvents[eventName].push(cb);\n    },\n\n    off: function(eventName, cb){\n      if (!eventName && !cb){\n        this.allEvents = {};\n      }\n      if (cb){\n        var match = this.allEvents[eventName].indexOf(cb);\n        if (match){\n          this.allEvents[eventName].splice(match, 1);\n        }\n\n      }else{\n        delete this.allEvents[eventName];\n      }\n    },\n\n    trigger: function(eventName){\n      var self = this;\n      var args = Array.prototype.slice.call(arguments, 0);\n      args.shift();\n\n      if (eventName in this.allEvents){\n        this.allEvents[eventName].forEach(function(cb){\n          cb.apply(self, args);\n        });\n      }\n    }\n  });\n\n  // Dataset class\n  chartstack.Dataset = Dataset = function(){\n    for (var option in config) {\n      console.log('option', option);\n    }\n  };\n  Dataset.prototype = {\n    flatten: function(){\n\n    }\n  };\n  \n\n\n  // Main Chart class.\n  chartstack.Chart = Chart = function(args) {\n    var $chart = this;\n    // Add to internal array.\n    chartstack.charts.push(this);\n\n    // Collects properties off DOM element and inspects data source.\n\n    function setup(){\n      var setupDom, setupJS, domain;\n\n      setupDom = function(){\n        $chart.el = args;\n\n        // Type of chart.\n        $chart.chartType = $chart.el.nodeName.toLocaleLowerCase();\n\n        // Our made up HTML nodes are display: inline so we need to make\n        // them block;\n        $chart.el.style.display = \"inline-block\";\n      };\n\n      setupJS = function(){\n        $chart.el = args.el;\n\n        // Type of chart.\n        $chart.chartType = args.chartType;\n      };\n\n      // Copy global defaults on to this chart.\n      each(chartstack.defaults, function(k, v){\n        $chart[v] = k;\n      });\n\n      if ('nodeType' in args){\n        setupDom();\n      }else{\n        setupJS();\n      }\n\n      // Find properties on dom element to override defaults.\n      // Support arrays here so we can store the data under a different name.\n      // TODO: These strings should be objects with support for defaults and other options.\n      each([\n        ['provider', 'domain'],\n        'datasource',\n        'dataformat',\n        'library',\n        'labels',\n        'width',\n        'height',\n        'title',\n        'titleTextColor', // Custom, currently supported on Google  TODO: NVD3\n        'legendColor', // Custom, currently supported on Google TODO: NVD3\n        'colors', // item colors - Supported for all chart types for Google and NVD3.\n        'pieSliceBorderColor', // TODO: Pie only  TODO: NVD3\n        'pieSliceTextColor', // TODO: Pie only  TODO: NVD3\n        'backgroundColor', // Bg color of chart.  TODO: NVD3\n        'customOptions',\n        // methods\n        'formatRowLabel' // Pie labels, xlabels on other charts.\n      ], function(attr){\n        var test, newKey;\n\n        if (is(attr, 'object')){\n          newKey = attr[1];\n          attr = attr[0];\n        }\n        test = args.nodeType ? args.getAttribute(attr) : args[attr];\n        // If property exists, save it.\n        if (test){\n          // Support for real booleans.\n          if (test == 'false' || test == '0' || test == 'off'){\n            test = false;\n          }else if (test == 'true' || test == '1' || test == \"on\"){\n            test = true;\n          }\n\n          if (newKey){\n            $chart[newKey] = test;\n          }else{\n            $chart[attr] = test;\n          }\n        }\n      });\n\n      // If we don't have a localized library set on this chart then set the\n      // global one.\n      if (!$chart.library){\n        $chart.library = chartstack.library;\n      }\n\n      // Used to transform response if needed to JSON.\n      if (!$chart.dataformat){\n        $chart.dataformat = 'json';\n      }\n\n      // Run library renderer's init if the lib needs to do some setup.\n      if (renderers[$chart.library] && renderers[$chart.library].init){\n        renderers[$chart.library].init($chart);\n      }\n\n      // Check datasource starts with { or [ assume it's JSON or else\n      // assume it's a URL to fetch.  We do not check for http anymore\n      // as it can be a local/relative file.\n      if (typeof $chart.datasource == 'string'){\n        if ($chart.datasource.match(/^({|\\[)/)){\n          $chart.datasource = JSON.parse($chart.datasource);\n        }else{\n          domain = $chart.datasource.match(/\\/\\/(.*?)\\//);\n          if (domain){\n            $chart.domain = domain[1];\n          }\n        }\n      }\n    }\n\n    // Fetches and normalizes data with a callback to pass data to.\n    function fetch(cb){\n      function finish(data){\n\n        // Transform data from CSV, etc, to JSON.\n        if ($chart.dataformat in transformers){\n          data = transformers[$chart.dataformat](data);\n        }else{\n          throw new Error('Transformer for datatype missing: ' + $chart.dataformat);\n        }\n\n        // If domain specified, check if we have adapters for this domain and\n        // that we also have a chart adapter for this chart from this domain.\n        if (adapters[$chart.domain] && adapters[$chart.domain][$chart.chartType]){\n          data = adapters[$chart.domain][$chart.chartType].call(new Adapter, data);\n        }\n\n        // TODO: Put this in a modular place. Probably in adapter object post init.\n        if ($chart.formatRowLabel){\n          chartstack.each(data.data, function(key, i){\n            if (i == 0){ return;}\n            data.data[i][0] = $chart.formatRowLabel(key[0]);\n          });\n        }\n\n        // Transform data into graph libs format using graph library's data\n        // adapter. Data adapter can be one method or an object of methods of\n        // chart types depending on how the chart library handles data.\n        if (chartstack.is(adapters[$chart.library], 'function')){\n          data = adapters[$chart.library].call(new Adapter, data);\n        }else{\n          data = adapters[$chart.library][$chart.chartType].call(new Adapter, data);\n        }\n        cb(data);\n      }\n\n      // If this is a URL fetch data.\n      if (typeof $chart.datasource == \"string\"){\n        chartstack.getAjax($chart.datasource, finish);\n\n        // The data is local.\n      }else{\n        finish($chart.datasource);\n      }\n    }\n\n    setup();\n    fetch(function(data){\n      var renderer = chartstack.renderers[$chart.library];\n      if (!renderer){\n        throw('Renderer for ' + $chart.library + ' is missing.');\n      }else if(!renderer[$chart.chartType]){\n        throw('Renderer for ' + $chart.library + ':' + $chart.chartType + ' is missing.');\n      }\n\n      // Render chart using data.\n      renderer[$chart.chartType]($chart, data);\n    });\n\n    // Public methods\n    extend($chart, {\n      show : function(){\n        $chart.trigger('show');\n      },\n\n      hide : function(){\n        $chart.trigger('hide');\n      },\n\n      draw: function(){\n        $chart.trigger('draw');\n      },\n\n      fetch : function(cb){\n        cb || (cb = function(){});\n        fetch(cb);\n      }\n    });\n  };\n\n  // Add Event support to Chart class.\n  Chart.prototype = new chartstack.Event();\n\n  // Hack to support google charts.\n  if (window.google){\n    google.load('visualization', '1.0', {'packages':['corechart']});\n    google.setOnLoadCallback(bootstrap);\n  }else{\n    document.addEventListener(\"DOMContentLoaded\", bootstrap);\n  }\n})(this);\n","/* global chartstack */\n(function(cs){\n  var proto;\n  var each = chartstack.each;\n\n  cs.diver = function(root, setup) {\n    this.build(root, setup);\n  };\n\n  proto = cs.diver.prototype;\n\n  proto.build = function(root, setup) {\n    var self = this;\n\n    self.cols = {\n      label: (setup.cols.label) ? setup.cols.label.split(\" -> \") : false,\n      cells: (setup.cols.cells) ? setup.cols.cells.split(\" -> \") : false,\n      fixed: (setup.cols.fixed) ? setup.cols.fixed : false\n    };\n\n    self.rows = {\n      index: setup.rows.index.split(\" -> \"),\n      cells: setup.rows.cells.split(\" -> \")\n    };\n    self.order = {\n      rows: (setup.order && setup.order.rows) ? setup.order.rows.split(\":\") : false,\n      cols: (setup.order && setup.order.cols) ? setup.order.cols.split(\":\") : false\n    };\n\n    self.table = [];\n    self.series = [];\n    self.raw = root;\n\n\n    // SORT ROWS\n    if (self.order.rows.length > 0) {\n      root.sort(function(a, b){\n        var aIndex = parse.apply(self, [a].concat(self.rows.index));\n        var bIndex = parse.apply(self, [b].concat(self.rows.index));\n\n        if (self.order.rows[1] == 'asc') {\n          if (aIndex > bIndex){return 1;}\n          if (aIndex < bIndex){return -1;}\n          return 0;\n        } else {\n          if (aIndex > bIndex){return -1;}\n          if (aIndex < bIndex){return 1;}\n          return 0;\n        }\n\n        return false;\n      });\n    }\n\n    // ADD SERIES\n    (function(){\n\n      self.cols.label = (self.cols.fixed) ? self.cols.fixed[0] : 'series';\n      var fixed = (self.cols.fixed) ? self.cols.fixed : [];\n      var cells = (self.cols.cells) ? parse.apply(self, [root[0]].concat(self.cols.cells)) : [];\n      var output = fixed.concat(cells);\n      output.splice(0,1);\n\n      each(output, function(el){\n        self.series.push({ key: el, values: [] });\n      });\n    })();\n\n    // ADD SERIES' RECORDS\n    each(root, function(el){\n      var index = parse.apply(self, [el].concat(self.rows.index));\n      var cells = parse.apply(self, [el].concat(self.rows.cells));\n\n      each(cells, function(cell, j){\n        var output = {};\n        output[self.cols.label] = index[0];\n        output.value = cell;\n        self.series[j].values.push(output);\n      });\n    });\n\n    // SORT COLUMNS\n    if (self.order.cols.length > 0) {\n      self.series = self.series.sort(function(a, b){\n        var aTotal = 0;\n        var bTotal = 0;\n        each(a.values, function(record){\n          aTotal += record.value;\n        });\n        each(b.values, function(record){\n          bTotal += record.value;\n        });\n\n        if (self.order.cols[1] == 'asc') {\n          return aTotal - bTotal;\n        } else {\n          return bTotal - aTotal;\n        }\n      });\n    }\n\n    // BUILD TABLE\n    self.table = [];\n    self.table.push([self.cols.label]);\n\n    each(self.series[0].values, function(value){\n      self.table.push([value[self.cols.label]]);\n    });\n\n    each(self.series, function(series){\n      self.table[0].push(series.key);\n      each(series.values, function(record, j){\n        self.table[j+1].push(record.value);\n      });\n    });\n\n    // COLUMN TRANSFORMS\n    if (setup.cols.transform) {\n      for (var transform in setup.cols.transform) {\n        if (transform == 'all') {\n          each(self.table[0], function(column, index){\n            if (index > 0) {\n              self.table[0][index] = setup.cols.transform[transform](self.table[0][index]);\n            }\n          });\n        } else {\n          transform = parseInt(transform);\n          if (self.table[0].length > transform) {\n            self.table[0][transform] = setup.cols.transform[transform](self.table[0][transform]);\n          }\n        }\n      }\n    }\n\n    // ROW TRANSFORMS\n    if (setup.rows.transform) {\n      each(self.table, function(row, index){\n        if (index > 0) {\n          for (var transform in setup.rows.transform) {\n            self.table[index][transform] = setup.rows.transform[transform](self.table[index][transform]);\n          }\n        }\n      });\n    }\n\n    return this;\n  };\n\n  proto.render = function(format){\n    if (format == 'csv') {\n    }\n    return this;\n  };\n\n  function parse() {\n    var result = [];\n    var loop = function() {\n      var root = arguments[0];\n      var args = Array.prototype.slice.call(arguments, 1);\n      var target = args.pop();\n\n      if (args.length === 0) {\n        if (root instanceof Array) {\n          args = root;\n        } else if (typeof root === 'object') {\n          args.push(root);\n        }\n      }\n\n      each(args, function(el){\n\n        if (el[target] || el[target] == 0 || el[target] !== void 0) {\n          // Easy grab!\n          if (el[target] === null) {\n            return result.push('');\n          } else {\n            return result.push(el[target]);\n          }\n\n        } else if (root[el]){\n          if (root[el] instanceof Array) {\n            // dive through each array item\n\n            each(root[el], function(n, i) {\n              var splinter = [root[el]].concat(root[el][i]).concat(args.slice(1)).concat(target);\n              return loop.apply(this, splinter);\n            });\n\n          } else {\n            if (root[el][target]) {\n              // grab it!\n              return result.push(root[el][target]);\n\n            } else {\n              // dive down a level!\n              return loop.apply(this, [root[el]].concat(args.splice(1)).concat(target));\n\n            }\n          }\n\n        } else {\n          // dive down a level!\n          return loop.apply(this, [el].concat(args.splice(1)).concat(target));\n\n        }\n\n        return;\n\n      });\n      if (result.length > 0) {\n        return result;\n      }\n    };\n    return loop.apply(this, arguments);\n  }\n})(chartstack);\n","/* global chartstack */\n// Data normalizing adaper for keen.io API.\n(function(cs){\n  cs.addAdapter('api.keen.io', {\n    piechart: function(data){\n      data = new cs.diver(data.result, {\n        cols: {\n          fixed: ['Browser', 'Share']\n        },\n        rows: {\n          index: 'platform',\n          cells: 'result'\n        }\n      });\n\n      return {\n        data: data.table,\n        extras: {}\n      };\n    },\n\n    barchart: function(data){\n      data = new cs.diver(data.result, {\n        cols: {\n          fixed: ['Date'],\n          cells: 'value -> platform'\n        },\n        rows: {\n          index: 'timeframe -> start',\n          cells: 'value -> result',\n          transform: {\n            0: function(value){\n              return new Date(value);\n            }\n          }\n        }\n      });\n\n      return {\n        data: data.table,\n        extras: {}\n      };\n    },\n\n    linechart: function(data){\n      var diverFormat;\n\n      if(data.result[0].value instanceof Array){\n        diverFormat = {\n          cols: {\n            fixed: ['Date'],\n            cells: 'value -> platform'\n          },\n          rows: {\n            index: 'timeframe -> start',\n            cells: 'value -> result',\n            transform: {\n              0: function(value){\n                return new Date(value);\n              }\n            }\n          }\n        }\n      }else{\n        diverFormat = {\n          cols: {\n            fixed: ['Date', 'Value']\n          },\n          rows: {\n            index: 'timeframe -> start',\n            cells: 'value',\n            transform: {\n              0: function(value){\n                return new Date(value);\n              }\n            }\n          }\n        }\n      }\n\n      data = new cs.diver(data.result, diverFormat);\n\n      return {\n        data: data.table,\n        extras: {}\n      };\n    }\n  });\n})(chartstack);\n","/* global google, chartstack */\n(function(cs){\n  cs.addRenderSet({\n    name: 'Google Charts',\n    namespace: 'google',\n\n    // Adapts data from UD format to library format.\n    adapter: function(data){\n      return google.visualization.arrayToDataTable(data.data);\n    },\n\n    // Renders DOM charts.\n    render: {\n      piechart: function($chart, data){\n        var chart, options;\n        var each = cs.each;\n        var extend = cs.extend;\n\n        // Set chart options\n        options = {\n          'title': $chart.title || '',\n          'width': parseInt($chart.width),\n          'height': parseInt($chart.height)\n        };\n\n        if ($chart.customOptions){\n          extend(options, $chart.customOptions);\n        }\n\n        each(['backgroundColor', 'pieSliceBorderColor', 'colors'], function(prop){\n          if (prop in $chart){\n            options[prop] = $chart[prop];\n          }\n        });\n\n        if ('pieSliceTextColor' in $chart){\n          options.pieSliceTextStyle = {\n            color: $chart.pieSliceTextColor\n          };\n        }\n\n        if ('titleTextColor' in $chart){\n          options.titleTextStyle = {\n            color: $chart.titleTextColor\n          };\n        }\n\n        if ('legendColor' in $chart){\n          options.legend = {\n            textStyle: {\n              color: $chart.legendColor\n            }\n          };\n        }\n\n        chart = new google.visualization.PieChart($chart.el);\n        chart.draw(data, options);\n      },\n\n      barchart: function($chart, data){\n        var chart, options;\n        var each = cs.each;\n        var extend = cs.extend;\n\n        // Set chart options\n        options = {\n          title: $chart.title || '',\n          'width': parseInt($chart.width),\n          'height': parseInt($chart.height)\n        };\n\n        each(['backgroundColor', 'pieSliceBorderColor', 'colors'], function(prop){\n          if (prop in $chart){\n            options[prop] = $chart[prop];\n          }\n        });\n\n        if ('titleTextColor' in $chart){\n          options.titleTextStyle = {\n            color: $chart.titleTextColor\n          };\n        }\n\n        if ('legendColor' in $chart){\n          options.legend = {\n            textStyle: {\n              color: $chart.legendColor\n            }\n          };\n        }\n\n        chart = new google.visualization.BarChart($chart.el);\n        chart.draw(data, options);\n      },\n\n      linechart: function($chart, data){\n        var chart, options;\n        var each = cs.each;\n        var extend = cs.extend;\n\n        // Set chart options\n        options = {\n          title: $chart.title || '',\n          'width': parseInt($chart.width),\n          'height': parseInt($chart.height)\n        };\n\n        each(['backgroundColor', 'pieSliceBorderColor', 'colors'], function(prop){\n          if (prop in $chart){\n            options[prop] = $chart[prop];\n          }\n        });\n\n        if ('titleTextColor' in $chart){\n          options.titleTextStyle = {\n            color: $chart.titleTextColor\n          };\n        }\n\n        if ('legendColor' in $chart){\n          options.legend = {\n            textStyle: {\n              color: $chart.legendColor\n            }\n          };\n        }\n\n        chart = new google.visualization.LineChart($chart.el);\n        chart.draw(data, options);\n      }\n    }\n  });\n\n})(chartstack);\n","/* global chartstack */\n(function(cs){\n  cs.addRenderSet({\n    name: 'NVD3',\n    namespace: 'nv',\n\n    // Adapts data from UD format to library format.\n    adapter: {\n      piechart: function(data){\n        data = data.data;\n\n        var ar = [];\n\n        // Pop off unused header array.\n        data.shift();\n\n        cs.each(data, function(item){\n          var entry = {\n            label: item[0],\n            value: item[1]\n          };\n          ar.push(entry);\n        });\n        return ar;\n      },\n\n      barchart: function(data){\n        data = data.data;\n\n        var each = cs.each;\n        var section = [];\n        var colomnKeys = data.shift();\n        var rowDescription = colomnKeys.shift();\n\n        // Prep rows\n        each(colomnKeys, function(name){\n          section.push({\n            key: name,\n            values: []\n          });\n        });\n\n        each(data, function(selection){\n          var rowDesc = selection.shift();\n          each(selection, function(y, a){\n            section[a].values.push({\n              x: rowDesc,\n              y: y\n            });\n          });\n        });\n\n        return {\n          result: section,\n          options: {\n            rowDescription: rowDescription\n          }\n        };\n      },\n\n      linechart: function(data){\n        data = data.data;\n\n        var each = cs.each;\n        var section = [];\n        var colomnKeys = data.shift();\n        var rowDescription = colomnKeys.shift();\n\n        // Prep rows\n        each(colomnKeys, function(name){\n          section.push({\n            key: name,\n            values: []\n          });\n        });\n\n        each(data, function(selection){\n          var rowDesc = selection.shift();\n          each(selection, function(y, a){\n            section[a].values.push([rowDesc, y]);\n          });\n        });\n\n        return {\n          result: section,\n          options: {\n            rowDescription: rowDescription\n          }\n        };\n      }\n    },\n\n    // Renders DOM charts.\n    render: {\n      init: function($chart){\n        // Create the SVG element that D3 needs.\n        $chart.svg = document.createElementNS ('http://www.w3.org/2000/svg', 'svg');\n        // Set height and width of SVG to it's parent's container.\n        cs.each(['width', 'height'], function(m){\n          var v = parseInt($chart[m]);\n          $chart[m] = v;\n          $chart.svg.setAttributeNS(null, m, v);\n        });\n\n        $chart.el.appendChild($chart.svg);\n      },\n\n      piechart: function($chart, data){\n\n        // Regular pie chart example\n        nv.addGraph(function() {\n          var chart = nv.models.pieChart()\n            .x(function(d) { return d.label; })\n            .y(function(d) { return d.value; })\n            .showLabels($chart.labels);\n\n          if ('colors' in $chart){\n            chart.color($chart.colors);\n          }\n\n          d3.select($chart.svg)\n            .datum(data)\n            .transition().duration(350)\n            .call(chart);\n\n          return chart;\n        });\n      },\n\n      barchart: function($chart, data){\n        nv.addGraph(function() {\n          var chart = nv.models.multiBarChart();\n\n          // Required to set the height once more or it's too small.\n          chart.width($chart.width).height($chart.height);\n\n          if (data.result[0].values[0].x instanceof Date){\n            chart.xAxis\n              .tickFormat(function(d) {\n                return d3.time.format('%b %d')(new Date(d));\n              });\n          }else{\n            chart.xAxis\n              .tickFormat(d3.format('f'));\n          }\n\n          if ('colors' in $chart){\n            chart.color($chart.colors);\n          }\n\n          chart.yAxis\n          //.axisLabel('Count')\n            .tickFormat(d3.format(',f'));\n\n          d3.select($chart.svg)\n            .datum(data.result)\n            .transition().duration(500)\n            .call(chart);\n\n          nv.utils.windowResize(chart.update);\n        });\n      },\n\n      linechart: function($chart, data){\n        var chart = nv.models.lineChart()\n          .x(function(d) { return d[0]; })\n          .y(function(d) { return d[1]; })\n          .color(d3.scale.category10().range())\n          .useInteractiveGuideline(true);\n\n        if (data.result[0].values[0][0] instanceof Date){\n          chart.xAxis\n            .tickFormat(function(d) {\n              return d3.time.format('%b %d')(new Date(d));\n            });\n        }else{\n          chart.xAxis\n            .tickFormat(d3.format('f'));\n        }\n\n        if ('colors' in $chart){\n          chart.color($chart.colors);\n        }\n\n        //chart.xAxis\n        //  .tickFormat(function(d) {\n        //    return d3.time.format('%x')(new Date(d));\n        //  });\n\n        chart.yAxis\n          .tickFormat(d3.format(',g'));\n\n        d3.select($chart.svg)\n          .datum(data.result)\n          .call(chart);\n\n        chart.width($chart.width).height($chart.height).update();\n        nv.utils.windowResize(chart.update);\n        return chart;\n      }\n\n    }\n\n  });\n})(chartstack);\n","/* global google, chartstack */\n(function(cs){\n  cs.addRenderSet({\n    name: 'Highcharts',\n    namespace: 'Highcharts',\n\n    // Adapts data from UD format to library format.\n    adapter: {\n      piechart: function(data){\n        data = data.data;\n        var headers = data.shift();\n\n        return {\n          type: 'pie',\n          name: headers.join(' '),\n          data: data\n        };\n      },\n\n      barchart: function(data){\n        data = data.data;\n\n        var each = cs.each;\n        var section = [];\n        var colomnKeys = data.shift();\n        var rowDescription = colomnKeys.shift();\n        var categories = [];\n\n        // Prep rows\n        each(colomnKeys, function(name){\n          section.push({\n            name: name,\n            data: []\n          });\n        });\n\n        each(data, function(selection){\n          categories.push(selection.shift());\n          each(selection, function(y, a){\n            section[a].data.push(y);\n          });\n        });\n\n        return {\n          result: section,\n          options: {\n            categories: categories,\n            rowDescription: rowDescription\n          }\n        };\n      },\n\n      linechart: function(data){\n        data = data.data;\n\n        var each = cs.each;\n        var section = [];\n        var colomnKeys = data.shift();\n        var rowDescription = colomnKeys.shift();\n        var categories = [];\n\n        // Prep rows\n        each(colomnKeys, function(name){\n          section.push({\n            name: name,\n            data: []\n          });\n        });\n\n        each(data, function(selection){\n          categories.push(selection.shift());\n          each(selection, function(y, a){\n            section[a].data.push(y);\n          });\n        });\n        return {\n          result: section,\n          options: {\n            categories: categories,\n            rowDescription: rowDescription\n          }\n        };\n      }\n    },\n\n    // Renders DOM charts.\n    render: {\n\n      piechart: function($chart, data){\n        return new Highcharts.Chart({\n          chart: {\n            renderTo: $chart.el,\n            type: 'pie',\n            plotBackgroundColor: null,\n            plotBorderWidth: null,\n            plotShadow: false\n          },\n          title: {\n            text: $chart.title || ''\n          },\n\n          //tooltip: {\n          //  pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'\n          //},\n\n          plotOptions: {\n            pie: {\n              allowPointSelect: true,\n              cursor: 'pointer',\n              dataLabels: {\n                enabled: true,\n                color: '#000000',\n                connectorColor: '#000000',\n                formatter: function() {\n                  return '<b>'+ this.point.name +'</b>: '+ this.percentage +' %';\n                }\n              }\n            }\n          },\n\n          series: [data]\n        });\n      },\n\n      barchart: function($chart, data){\n        return new Highcharts.Chart({\n          chart: {\n            renderTo: $chart.el,\n            type: 'bar',\n            plotBackgroundColor: null,\n            plotBorderWidth: null,\n            plotShadow: false\n          },\n          title: {\n            text: $chart.title || ''\n          },\n          xAxis: {\n            title: {\n              text: data.options.rowDescription\n            },\n            labels: {\n              // format: '{value:%m-%d}'\n            },\n            categories: data.options.categories\n          },\n          yAxis: {\n            min: 0,\n            title: {\n              align: 'high'\n            },\n            labels: {\n              overflow: 'justify'\n            }\n          },\n          //tooltip: {\n          //  valueSuffix: ' millions'\n          //},\n          plotOptions: {\n            bar: {\n              dataLabels: {\n                enabled: true\n              }\n            }\n          },\n          legend: {\n            layout: 'vertical',\n            align: 'right',\n            verticalAlign: 'top',\n            x: -40,\n            y: 100,\n            floating: true,\n            borderWidth: 1,\n            backgroundColor: '#FFFFFF',\n            shadow: true\n          },\n          credits: {\n            enabled: false\n          },\n          series: data.result\n        });\n      },\n\n      linechart: function($chart, data){\n        return new Highcharts.Chart({\n          chart: {\n            renderTo: $chart.el,\n            type: 'line',\n            plotBackgroundColor: null,\n            plotBorderWidth: null,\n            plotShadow: false\n          },\n          title: {\n            text: $chart.title || '',\n            x: -20 //center\n          },\n          xAxis: {\n            categories: data.options.categories,\n            title: {\n              text: data.options.rowDescription\n            }\n          },\n          yAxis: {\n            title: {\n              // text: 'Temperature (C)'\n            },\n            plotLines: [{\n              value: 0,\n              width: 1,\n              color: '#808080'\n            }]\n          },\n          //tooltip: {\n          //  valueSuffix: 'C'\n          //},\n          legend: {\n            layout: 'vertical',\n            align: 'right',\n            verticalAlign: 'middle',\n            borderWidth: 0\n          },\n          series: data.result\n        });\n      }\n    }\n  });\n\n})(chartstack);\n"]}