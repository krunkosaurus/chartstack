{"version":3,"file":"chartstack.min.js","sources":["../src/chartstack.js","../src/diver/chartstack.diver.js","../src/adapter/chartstack.keen.universal.adapter.js","../src/adapter/chartstack.universal.nvd3.adapter.js","../src/renderer/chartstack.nvd3.renderer.js","../src/adapter/chartstack.universal.googlecharts.adapter.js","../src/renderer/chartstack.googlecharts.renderer.js","../src/adapter/chartstack.universal.highcharts.adapter.js","../src/renderer/chartstack.highcharts.renderer.js"],"names":["chartstack","is","o","t","each","cb","s","n","length","call","hasOwnProperty","extend","e","v","ready","isDomReady","readyCallbacks","push","bootstrap","defaults","library","Object","keys","renderers","ns","window","Error","parse","chartNodes","document","querySelectorAll","el","getAttribute","Chart","getAjax","url","xhr","createXHR","ActiveXObject","console","warn","message","XMLHttpRequest","onreadystatechange","readyState","responseText","open","setRequestHeader","send","get","strOrEl","matchedChart","nodeName","querySelector","charts","chart","addAdapter","domain","configObj","func","type","adapters","addRenderer","provider","addTransformer","name","transformers","Adapter","json","data","JSON","addtransformer","labels","DataAdapter","args","setup","setupDom","setupJS","$chart","chartType","toLocaleLowerCase","style","display","k","attr","test","newKey","nodeType","dataformat","init","datasource","match","fetch","finish","this","renderer","show","hide","render","google","load","packages","setOnLoadCallback","addEventListener","result","loop","root","arguments","Array","prototype","slice","target","pop","i","splinter","concat","apply","splice","proto","diver","build","self","cols","label","split","cells","fixed","rows","index","order","table","series","raw","sort","a","b","aIndex","bIndex","output","key","values","cell","j","value","aTotal","bTotal","record","transform","column","parseInt","row","format","log","join","piechart","extras","barchart","Date","linechart","diverFormat","ar","shift","item","entry","section","colomnKeys","rowDescription","selection","rowDesc","y","x","options","svg","createElementNS","m","setAttributeNS","appendChild","nv","addGraph","models","pieChart","d","showLabels","color","colors","d3","select","datum","transition","duration","multiBarChart","width","height","xAxis","tickFormat","time","yAxis","utils","windowResize","update","lineChart","scale","category10","range","useInteractiveGuideline","visualization","arrayToDataTable","title","customOptions","prop","pieSliceTextStyle","pieSliceTextColor","titleTextStyle","titleTextColor","legend","textStyle","legendColor","PieChart","draw","BarChart","LineChart","headers","categories","Highcharts","renderTo","plotBackgroundColor","plotBorderWidth","plotShadow","text","plotOptions","pie","allowPointSelect","cursor","dataLabels","enabled","connectorColor","formatter","point","percentage","min","align","overflow","bar","layout","verticalAlign","floating","borderWidth","backgroundColor","shadow","credits","plotLines"],"mappings":"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","sourcesContent":["/* global google */\n(function(chartstack) {\n  var adapters, renderers, charts, Chart, Adapter, transformers, isDomReady, readyCallbacks = [];\n\n  // These three functions taken from https://github.com/spocke/punymce\n  function is(o, t){\n    o = typeof(o);\n\n    if (!t){\n      return o != 'undefined';\n    }\n\n    return o == t;\n  }\n\n  function each(o, cb, s){\n    var n;\n\n    if (!o){\n      return 0;\n    }\n\n    s = !s ? o : s;\n\n    if (is(o.length)){\n      // Indexed arrays, needed for Safari\n      for (n=0; n<o.length; n++) {\n        if (cb.call(s, o[n], n, o) === false){\n          return 0;\n        }\n      }\n    } else {\n      // Hashtables\n      for (n in o){\n        if (o.hasOwnProperty(n)) {\n          if (cb.call(s, o[n], n, o) === false){\n            return 0;\n          }\n        }\n      }\n    }\n\n    return 1;\n  }\n\n  // Extend object e on to o.\n  function extend(o, e){\n    each(e, function(v, n){\n      o[n] = v;\n    });\n\n    return o;\n  }\n\n  // DOM-ready queue method.\n  function ready(cb){\n    if (!isDomReady){\n      readyCallbacks.push(cb);\n    }else{\n      cb();\n    }\n  }\n\n  // Called when DOM and chart libs are loaded and ready.\n  function bootstrap (){\n    // If graph library isn't set in defaults, match provider to the first graph\n    // lib found on the page that we have an adapter for.\n    if (chartstack.defaults.library){\n      chartstack.library = chartstack.defaults.library;\n    }else{\n      each(Object.keys(chartstack.renderers), function(ns){\n        if (ns in window){\n          chartstack.library = ns;\n          return false;\n        }\n      });\n\n      if (!chartstack.library){\n        throw new Error('No charting library located.');\n      }\n\n      // Parse the dom.\n      chartstack.parse();\n\n      isDomReady = true;\n      each(readyCallbacks, function(cb){\n        cb();\n      });\n    }\n  }\n\n  // Parse the DOM and search for valid charting elements to turn to classes.\n  function parse(){\n    var chartNodes = document.querySelectorAll('piechart,barchart,linechart');\n    each(chartNodes, function(el){\n      // Ensure data attribute exists.\n      if (el.getAttribute('datasource')){\n        new Chart(el);\n      }\n    });\n  }\n\n  function getAjax(url, cb){\n    var xhr;\n    var createXHR = function(){\n      var xhr;\n      if (window.ActiveXObject){\n        try{\n          xhr = new ActiveXObject(\"Microsoft.XMLHTTP\");\n        }catch(e){\n          console.warn(e.message);\n          xhr = null;\n        }\n      }else{\n        xhr = new XMLHttpRequest();\n      }\n      return xhr;\n    };\n\n    xhr = createXHR();\n    xhr.onreadystatechange = function(){\n      if (xhr.readyState === 4){\n        cb(xhr.responseText);\n      }\n    };\n    xhr.open('GET', url, true);\n    xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');\n    xhr.send();\n  }\n\n  // Returns a chartstack object by html element id or element comparison.\n  function get(strOrEl){\n    var el = strOrEl.nodeName ? strOrEl : document.querySelector(strOrEl);\n    var matchedChart;\n\n    if (el){\n      each(chartstack.charts, function(chart){\n        if (el == chart.el){\n          matchedChart = chart;\n          return false;\n        }\n      });\n      return matchedChart;\n    }\n    throw(\"That element doesn't exist on the page.\");\n  }\n\n  // Adapters that normalize 3rd party api to a standard format.\n  function addAdapter(domain, configObj){\n    each(configObj, function(func, type){\n      if (!adapters[domain]){\n        adapters[domain] = {};\n      }\n\n      adapters[domain][type] = func;\n\n    });\n  }\n\n  // Chart specific Renderers that Chartstack uses to render charts.\n  function addRenderer(provider, configObj){\n    each(configObj, function(func, type){\n      if (!renderers[provider]){\n        renderers[provider] = {};\n      }\n\n      renderers[provider][type] = func;\n    });\n  }\n\n  // Methods that transform non-JSON data to JSON.\n  function addTransformer(name, func){\n    transformers[name] = func;\n  }\n\n  // Placeholder for chartstack data adapters.\n  chartstack.adapters = adapters = {};\n\n  // Placeholder for chartstack renderers.\n  chartstack.renderers = renderers = {};\n\n  // Array of instantiated charts.\n  chartstack.charts = charts = [];\n\n  // Placeholder for transform data adapters.\n  chartstack.transformers = transformers = {\n    json : function(data){\n      if (typeof data == 'string'){\n        return JSON.parse(data);\n      }else{\n        return data;\n      }\n    }\n  };\n\n  // Store them in API as well for plugin use.\n  extend(chartstack, {\n    parse : parse,\n    is : is,\n    each : each,\n    extend : extend,\n    getAjax : getAjax,\n    ready: ready,\n    get: get,\n    addAdapter : addAdapter,\n    addRenderer : addRenderer,\n    addtransformer : addTransformer\n  });\n\n  // Defaults accessible from outside in case user wants to change them.\n  // DOM properties override defaults.\n  chartstack.defaults = {\n    labels: true\n  };\n\n  chartstack.DataAdapter = Adapter = function(){\n  };\n\n  // Main Chart class.\n  chartstack.Chart = Chart = function(args) {\n    var $chart = this;\n    // Add to internal array.\n    chartstack.charts.push(this);\n\n    // Collects properties off DOM element and inspects data source.\n\n    function setup(){\n      var setupDom, setupJS, domain;\n\n      setupDom = function(){\n        $chart.el = args;\n\n        // Type of chart.\n        $chart.chartType = $chart.el.nodeName.toLocaleLowerCase();\n\n        // Our made up HTML nodes are display: inline so we need to make\n        // them block;\n        $chart.el.style.display = \"inline-block\";\n      };\n\n      setupJS = function(){\n        $chart.el = args.el;\n\n        // Type of chart.\n        $chart.chartType = args.chartType;\n      };\n\n      // Copy global defaults on to this chart.\n      each(chartstack.defaults, function(k, v){\n        $chart[v] = k;\n      });\n\n      if ('nodeType' in args){\n        setupDom();\n      }else{\n        setupJS();\n      }\n\n      // Find properties on dom element to override defaults.\n      // Support arrays here so we can store the data under a different name.\n      // TODO: These strings should be objects with support for defaults and other options.\n      each([\n        ['provider', 'domain'],\n        'datasource',\n        'dataformat',\n        'library',\n        'labels',\n        'width',\n        'height',\n        'title',\n        'titleTextColor', // Custom, currently supported on Google  TODO: NVD3\n        'legendColor', // Custom, currently supported on Google TODO: NVD3\n        'colors', // item colors - Supported for all chart types for Google and NVD3.\n        'pieSliceBorderColor', // TODO: Pie only  TODO: NVD3\n        'pieSliceTextColor', // TODO: Pie only  TODO: NVD3\n        'backgroundColor', // Bg color of chart.  TODO: NVD3\n        'customOptions'\n      ], function(attr){\n        var test, newKey;\n\n        if (is(attr, 'object')){\n          newKey = attr[1];\n          attr = attr[0];\n        }\n        test = args.nodeType ? args.getAttribute(attr) : args[attr];\n        // If property exists, save it.\n        if (test){\n          // Support for real booleans.\n          if (test == 'false' || test == '0' || test == 'off'){\n            test = false;\n          }else if (test == 'true' || test == '1' || test == \"on\"){\n            test = true;\n          }\n\n          if (newKey){\n            $chart[newKey] = test;\n          }else{\n            $chart[attr] = test;\n          }\n        }\n      });\n\n      // If we don't have a localized library set on this chart then set the\n      // global one.\n      if (!$chart.library){\n        $chart.library = chartstack.library;\n      }\n\n      // Used to transform response if needed to JSON.\n      if (!$chart.dataformat){\n        $chart.dataformat = 'json';\n      }\n\n      // Run library renderer's init if the lib needs to do some setup.\n      if (renderers[$chart.library] && renderers[$chart.library].init){\n        renderers[$chart.library].init($chart);\n      }\n\n      // Check datasource starts with { or [ assume it's JSON or else\n      // assume it's a URL to fetch.  We do not check for http anymore\n      // as it can be a local/relative file.\n      if (typeof $chart.datasource == 'string'){\n        if ($chart.datasource.match(/^({|\\[)/)){\n          $chart.datasource = JSON.parse($chart.datasource);\n        }else{\n          domain = $chart.datasource.match(/\\/\\/(.*?)\\//);\n          if (domain){\n            $chart.domain = domain[1];\n          }\n        }\n      }\n    }\n\n\n    // Fetches and normalizes data with a callback to pass data to.\n    function fetch(cb){\n      function finish(data){\n\n        // Transform data.\n        if ($chart.dataformat in transformers){\n          data = transformers[$chart.dataformat](data);\n        }else{\n          throw new Error('Transformer for datatype missing: ' + $chart.dataformat);\n        }\n\n        // If domain specified, check if we have adapters for this domain and\n        // that we also have a chart adapter for this chart from this domain.\n        if (adapters[$chart.domain] && adapters[$chart.domain][$chart.chartType]){\n          data = adapters[$chart.domain][$chart.chartType].call(new Adapter, data);\n        }\n\n        // Transform data into graph libs format.\n        data = adapters[$chart.library][$chart.chartType].call(new Adapter, data);\n        cb(data);\n      }\n\n      // If this is a URL fetch data.\n      if (typeof $chart.datasource == \"string\"){\n        chartstack.getAjax($chart.datasource, finish);\n\n        // The data is local.\n      }else{\n        finish($chart.datasource);\n      }\n    }\n\n    setup();\n    fetch(function(data){\n      var renderer = chartstack.renderers[$chart.library];\n      if (!renderer){\n        throw('Renderer for ' + $chart.library + ' is missing.');\n      }else if(!renderer[$chart.chartType]){\n        throw('Renderer for ' + $chart.library + ':' + $chart.chartType + ' is missing.');\n      }\n      renderer[$chart.chartType]($chart, data);\n    });\n\n    // Public methods\n    extend(this, {\n      show : function(){\n        this.el.style.display = 'none';\n      },\n\n      hide : function(){\n        this.el.style.display = 'block';\n      },\n\n      render : function(){\n        // TODO\n        // chartstack.renderer[this.chartType](this, this.fetch());\n      },\n\n      fetch : function(cb){\n        cb || (cb = function(){});\n        fetch(cb);\n      }\n    });\n  };\n\n  // Hack to support google charts.\n  if (window.google){\n    google.load('visualization', '1.0', {'packages':['corechart']});\n    google.setOnLoadCallback(bootstrap);\n  }else{\n    document.addEventListener(\"DOMContentLoaded\", bootstrap);\n  }\n\n  // Expose chartstack\n  window.chartstack = chartstack;\n})({});\n","/* global chartstack */\n(function(ns){\n  var proto;\n  var each = chartstack.each;\n\n  ns.diver = function(root, setup) {\n    this.build(root, setup);\n  };\n\n  proto = ns.diver.prototype;\n\n  proto.build = function(root, setup) {\n    var self = this;\n\n    self.cols = {\n      label: (setup.cols.label) ? setup.cols.label.split(\" -> \") : false,\n      cells: (setup.cols.cells) ? setup.cols.cells.split(\" -> \") : false,\n      fixed: (setup.cols.fixed) ? setup.cols.fixed : false\n    };\n\n    self.rows = {\n      index: setup.rows.index.split(\" -> \"),\n      cells: setup.rows.cells.split(\" -> \")\n    };\n    self.order = {\n      rows: (setup.order && setup.order.rows) ? setup.order.rows.split(\":\") : false,\n      cols: (setup.order && setup.order.cols) ? setup.order.cols.split(\":\") : false\n    };\n\n    self.table = [];\n    self.series = [];\n    self.raw = root;\n\n\n    // SORT ROWS\n    if (self.order.rows.length > 0) {\n      root.sort(function(a, b){\n        var aIndex = parse.apply(self, [a].concat(self.rows.index));\n        var bIndex = parse.apply(self, [b].concat(self.rows.index));\n\n        if (self.order.rows[1] == 'asc') {\n          if (aIndex > bIndex){return 1;}\n          if (aIndex < bIndex){return -1;}\n          return 0;\n        } else {\n          if (aIndex > bIndex){return -1;}\n          if (aIndex < bIndex){return 1;}\n          return 0;\n        }\n\n        return false;\n      });\n    }\n\n    // ADD SERIES\n    (function(){\n\n      self.cols.label = (self.cols.fixed) ? self.cols.fixed[0] : 'series';\n      var fixed = (self.cols.fixed) ? self.cols.fixed : [];\n      var cells = (self.cols.cells) ? parse.apply(self, [root[0]].concat(self.cols.cells)) : [];\n      var output = fixed.concat(cells);\n      output.splice(0,1);\n\n      each(output, function(el){\n        self.series.push({ key: el, values: [] });\n      });\n    })();\n\n    // ADD SERIES' RECORDS\n    each(root, function(el){\n      var index = parse.apply(self, [el].concat(self.rows.index));\n      var cells = parse.apply(self, [el].concat(self.rows.cells));\n\n      each(cells, function(cell, j){\n        var output = {};\n        output[self.cols.label] = index[0];\n        output.value = cell;\n        self.series[j].values.push(output);\n      });\n    });\n\n    // SORT COLUMNS\n    if (self.order.cols.length > 0) {\n      self.series = self.series.sort(function(a, b){\n        var aTotal = 0;\n        var bTotal = 0;\n        each(a.values, function(record){\n          aTotal += record.value;\n        });\n        each(b.values, function(record){\n          bTotal += record.value;\n        });\n\n        if (self.order.cols[1] == 'asc') {\n          return aTotal - bTotal;\n        } else {\n          return bTotal - aTotal;\n        }\n      });\n    }\n\n    // BUILD TABLE\n    self.table = [];\n    self.table.push([self.cols.label]);\n\n    each(self.series[0].values, function(value){\n      self.table.push([value[self.cols.label]]);\n    });\n\n    each(self.series, function(series){\n      self.table[0].push(series.key);\n      each(series.values, function(record, j){\n        self.table[j+1].push(record.value);\n      });\n    });\n\n    // COLUMN TRANSFORMS\n    if (setup.cols.transform) {\n      for (var transform in setup.cols.transform) {\n        if (transform == 'all') {\n          each(self.table[0], function(column, index){\n            if (index > 0) {\n              self.table[0][index] = setup.cols.transform[transform](self.table[0][index]);\n            }\n          });\n        } else {\n          transform = parseInt(transform);\n          if (self.table[0].length > transform) {\n            self.table[0][transform] = setup.cols.transform[transform](self.table[0][transform]);\n          }\n        }\n      }\n    }\n\n    // ROW TRANSFORMS\n    if (setup.rows.transform) {\n      each(self.table, function(row, index){\n        if (index > 0) {\n          for (var transform in setup.rows.transform) {\n            self.table[index][transform] = setup.rows.transform[transform](self.table[index][transform]);\n          }\n        }\n      });\n    }\n\n    return this;\n  };\n\n  proto.render = function(format){\n    if (format == 'csv') {\n      console.log(this.table.join('\\n'));\n    }\n    return this;\n  };\n\n  function parse() {\n    var result = [];\n    var loop = function() {\n      var root = arguments[0];\n      var args = Array.prototype.slice.call(arguments, 1);\n      var target = args.pop();\n      //console.log('DIVE ' + target + ':', root, args);\n\n      if (args.length === 0) {\n        if (root instanceof Array) {\n          args = root;\n        } else if (typeof root === 'object') {\n          args.push(root);\n        }\n      }\n\n      each(args, function(el){\n\n        if (el[target] || el[target] == 0 || el[target] !== void 0) {\n          // Easy grab!\n          if (el[target] === null) {\n            return result.push('');\n          } else {\n            return result.push(el[target]);\n          }\n\n        } else if (root[el]){\n          if (root[el] instanceof Array) {\n            // dive through each array item\n\n            each(root[el], function(n, i) {\n              var splinter = [root[el]].concat(root[el][i]).concat(args.slice(1)).concat(target);\n              return loop.apply(this, splinter);\n            });\n\n          } else {\n            if (root[el][target]) {\n              // grab it!\n              return result.push(root[el][target]);\n\n            } else {\n              // dive down a level!\n              return loop.apply(this, [root[el]].concat(args.splice(1)).concat(target));\n\n            }\n          }\n\n        } else {\n          // dive down a level!\n          return loop.apply(this, [el].concat(args.splice(1)).concat(target));\n\n        }\n\n        return;\n\n      });\n      if (result.length > 0) {\n        return result;\n      }\n    };\n    return loop.apply(this, arguments);\n  }\n})(chartstack);\n","/* global chartstack */\n// Data normalizing adaper for keen.io API.\n\nchartstack.addAdapter('api.keen.io', {\n  piechart: function(data){\n\n    console.log('data', data);\n\n    var b = new chartstack.diver(data.result, {\n      cols: {\n        fixed: ['Browser', 'Share']\n      },\n      rows: {\n        index: 'platform',\n        cells: 'result'\n      }\n    });\n\n    return {\n      data: b.table,\n      extras: {}\n    };\n  },\n\n  barchart: function(data){\n    data = new chartstack.diver(data.result, {\n      cols: {\n        fixed: ['Date'],\n        cells: 'value -> platform'\n      },\n      rows: {\n        index: 'timeframe -> start',\n        cells: 'value -> result',\n        transform: {\n          0: function(value){\n            return new Date(value);\n          }\n        }\n      }\n    });\n\n    return {\n      data: data.table,\n      extras: {}\n    };\n  },\n\n  linechart: function(data){\n    console.log('data', data);\n    var diverFormat;\n\n    if(data.result[0].value instanceof Array){\n      diverFormat = {\n        cols: {\n          fixed: ['Date'],\n          cells: 'value -> platform'\n        },\n        rows: {\n          index: 'timeframe -> start',\n          cells: 'value -> result',\n          transform: {\n            0: function(value){\n              return new Date(value);\n            }\n          }\n        }\n      }\n    }else{\n      diverFormat = {\n        cols: {\n          fixed: ['Date', 'Value']\n        },\n        rows: {\n          index: 'timeframe -> start',\n          cells: 'value',\n          transform: {\n            0: function(value){\n              return new Date(value);\n            }\n          }\n        }\n      }\n    }\n\n\n    data = new chartstack.diver(data.result, diverFormat);\n\n    console.log('diver format data', data);\n\n    return {\n      data: data.table,\n      extras: {}\n    };\n  }\n});\n\n","/* global chartstack */\n\nchartstack.addAdapter('nv', {\n  piechart: function(data){\n    data = data.data;\n\n    var ar = [];\n\n    // Pop off unused header array.\n    data.shift();\n\n    chartstack.each(data, function(item){\n      var entry = {\n        label: item[0],\n        value: item[1]\n      };\n      ar.push(entry);\n    });\n    return ar;\n  },\n\n  barchart: function(data){\n    data = data.data;\n\n    var each = chartstack.each;\n    var section = [];\n    var colomnKeys = data.shift();\n    var rowDescription = colomnKeys.shift();\n\n    // Prep rows\n    each(colomnKeys, function(name){\n      section.push({\n        key: name,\n        values: []\n      });\n    });\n\n    each(data, function(selection){\n      var rowDesc = selection.shift();\n      each(selection, function(y, a){\n        section[a].values.push({\n          x: rowDesc,\n          y: y\n        });\n      });\n    });\n\n    return {\n      result: section,\n      options: {\n        rowDescription: rowDescription\n      }\n    };\n  },\n\n  linechart: function(data){\n    data = data.data;\n\n    var each = chartstack.each;\n    var section = [];\n    var colomnKeys = data.shift();\n    var rowDescription = colomnKeys.shift();\n\n    // Prep rows\n    each(colomnKeys, function(name){\n      section.push({\n        key: name,\n        values: []\n      });\n    });\n\n    each(data, function(selection){\n      var rowDesc = selection.shift();\n      each(selection, function(y, a){\n        section[a].values.push([rowDesc, y]);\n      });\n    });\n\n    return {\n      result: section,\n      options: {\n        rowDescription: rowDescription\n      }\n    };\n  }\n});\n","/* global chartstack, nv, d3 */\nchartstack.addRenderer('nv', {\n\n  init: function($chart){\n    // Create the SVG element that D3 needs.\n    $chart.svg = document.createElementNS ('http://www.w3.org/2000/svg', 'svg');\n    // Set height and width of SVG to it's parent's container.\n    chartstack.each(['width', 'height'], function(m){\n      var v = parseInt($chart[m]);\n      $chart[m] = v;\n      $chart.svg.setAttributeNS(null, m, v);\n    });\n\n    $chart.el.appendChild($chart.svg);\n  },\n\n  piechart: function($chart, data){\n\n    // Regular pie chart example\n    nv.addGraph(function() {\n      var chart = nv.models.pieChart()\n        .x(function(d) { return d.label; })\n        .y(function(d) { return d.value; })\n        .showLabels($chart.labels);\n\n      if ('colors' in $chart){\n        chart.color($chart.colors);\n      }\n\n      d3.select($chart.svg)\n        .datum(data)\n        .transition().duration(350)\n        .call(chart);\n\n      return chart;\n    });\n  },\n\n  barchart: function($chart, data){\n    nv.addGraph(function() {\n      var chart = nv.models.multiBarChart();\n\n      // Required to set the height once more or it's too small.\n      chart.width($chart.width).height($chart.height);\n\n      if (data.result[0].values[0].x instanceof Date){\n        chart.xAxis\n          .tickFormat(function(d) {\n            return d3.time.format('%b %d')(new Date(d));\n          });\n      }else{\n        chart.xAxis\n        .tickFormat(d3.format('f'));\n      }\n\n      if ('colors' in $chart){\n        chart.color($chart.colors);\n      }\n\n      chart.yAxis\n        //.axisLabel('Count')\n        .tickFormat(d3.format(',f'));\n\n      d3.select($chart.svg)\n        .datum(data.result)\n        .transition().duration(500)\n        .call(chart);\n\n      nv.utils.windowResize(chart.update);\n    });\n  },\n\n  linechart: function($chart, data){\n    var chart = nv.models.lineChart()\n      .x(function(d) { return d[0]; })\n      .y(function(d) { return d[1]; })\n      .color(d3.scale.category10().range())\n      .useInteractiveGuideline(true);\n\n    if (data.result[0].values[0][0] instanceof Date){\n      chart.xAxis\n        .tickFormat(function(d) {\n          return d3.time.format('%b %d')(new Date(d));\n        });\n    }else{\n      chart.xAxis\n        .tickFormat(d3.format('f'));\n    }\n\n    if ('colors' in $chart){\n      chart.color($chart.colors);\n    }\n\n    //chart.xAxis\n    //  .tickFormat(function(d) {\n    //    return d3.time.format('%x')(new Date(d));\n    //  });\n\n    chart.yAxis\n      .tickFormat(d3.format(',g'));\n\n    d3.select($chart.svg)\n      .datum(data.result)\n      .call(chart);\n\n    chart.width($chart.width).height($chart.height).update();\n    nv.utils.windowResize(chart.update);\n    return chart;\n  }\n\n});\n","/* global google, chartstack */\n\nchartstack.addAdapter('google', {\n  piechart: function(data){\n    return google.visualization.arrayToDataTable(data.data);\n  },\n\n  barchart: function(data){\n    return google.visualization.arrayToDataTable(data.data);\n  },\n\n  linechart: function(data){\n    return google.visualization.arrayToDataTable(data.data);\n  }\n});\n","/* global google, chartstack */\nchartstack.addRenderer('google', {\n\n  piechart: function($chart, data){\n    var chart, options;\n    var each = chartstack.each;\n    var extend = chartstack.extend;\n\n    // Set chart options\n    options = {\n      'title': $chart.title || '',\n      'width': parseInt($chart.width),\n      'height': parseInt($chart.height)\n    };\n\n    if ($chart.customOptions){\n      extend(options, $chart.customOptions);\n    }\n\n    each(['backgroundColor', 'pieSliceBorderColor', 'colors'], function(prop){\n      if (prop in $chart){\n        options[prop] = $chart[prop];\n      }\n    });\n\n    if ('pieSliceTextColor' in $chart){\n      options.pieSliceTextStyle = {\n        color: $chart.pieSliceTextColor\n      };\n    }\n\n    if ('titleTextColor' in $chart){\n      options.titleTextStyle = {\n        color: $chart.titleTextColor\n      };\n    }\n\n    if ('legendColor' in $chart){\n      options.legend = {\n        textStyle: {\n          color: $chart.legendColor\n        }\n      };\n    }\n\n    console.log('options', options);\n    chart = new google.visualization.PieChart($chart.el);\n    chart.draw(data, options);\n  },\n\n  barchart: function($chart, data){\n    var chart, options;\n    var each = chartstack.each;\n    var extend = chartstack.extend;\n\n    // Set chart options\n    options = {\n      title: $chart.title || '',\n      'width': parseInt($chart.width),\n      'height': parseInt($chart.height)\n    };\n\n    each(['backgroundColor', 'pieSliceBorderColor', 'colors'], function(prop){\n      if (prop in $chart){\n        options[prop] = $chart[prop];\n      }\n    });\n\n    if ('titleTextColor' in $chart){\n      options.titleTextStyle = {\n        color: $chart.titleTextColor\n      };\n    }\n\n    if ('legendColor' in $chart){\n      options.legend = {\n        textStyle: {\n          color: $chart.legendColor\n        }\n      };\n    }\n\n    chart = new google.visualization.BarChart($chart.el);\n    chart.draw(data, options);\n  },\n\n  linechart: function($chart, data){\n    var chart, options;\n    var each = chartstack.each;\n    var extend = chartstack.extend;\n\n    // Set chart options\n    options = {\n      title: $chart.title || '',\n      'width': parseInt($chart.width),\n      'height': parseInt($chart.height)\n    };\n\n    each(['backgroundColor', 'pieSliceBorderColor', 'colors'], function(prop){\n      if (prop in $chart){\n        options[prop] = $chart[prop];\n      }\n    });\n\n    if ('titleTextColor' in $chart){\n      options.titleTextStyle = {\n        color: $chart.titleTextColor\n      };\n    }\n\n    if ('legendColor' in $chart){\n      options.legend = {\n        textStyle: {\n          color: $chart.legendColor\n        }\n      };\n    }\n\n    chart = new google.visualization.LineChart($chart.el);\n    chart.draw(data, options);\n  }\n\n});\n","/* global chartstack */\n\nchartstack.addAdapter('Highcharts', {\n  piechart: function(data){\n    data = data.data;\n    var headers = data.shift();\n\n    return {\n      type: 'pie',\n      name: headers.join(' '),\n      data: data\n    };\n  },\n\n  barchart: function(data){\n    data = data.data;\n\n    var each = chartstack.each;\n    var section = [];\n    var colomnKeys = data.shift();\n    var rowDescription = colomnKeys.shift();\n    var categories = [];\n\n    // Prep rows\n    each(colomnKeys, function(name){\n      section.push({\n        name: name,\n        data: []\n      });\n    });\n\n    each(data, function(selection){\n      categories.push(selection.shift());\n      each(selection, function(y, a){\n        section[a].data.push(y);\n      });\n    });\n\n    return {\n      result: section,\n      options: {\n        categories: categories,\n        rowDescription: rowDescription\n      }\n    };\n  },\n\n  linechart: function(data){\n    data = data.data;\n\n    var each = chartstack.each;\n    var section = [];\n    var colomnKeys = data.shift();\n    var rowDescription = colomnKeys.shift();\n    var categories = [];\n\n    // Prep rows\n    each(colomnKeys, function(name){\n      section.push({\n        name: name,\n        data: []\n      });\n    });\n\n    each(data, function(selection){\n      categories.push(selection.shift());\n      each(selection, function(y, a){\n        section[a].data.push(y);\n      });\n    });\n    return {\n      result: section,\n      options: {\n        categories: categories,\n        rowDescription: rowDescription\n      }\n    };\n  }\n});\n","/* global chartstack, Highcharts */\nchartstack.addRenderer('Highcharts', {\n\n  piechart: function($chart, data){\n    return new Highcharts.Chart({\n      chart: {\n        renderTo: $chart.el,\n        type: 'pie',\n        plotBackgroundColor: null,\n        plotBorderWidth: null,\n        plotShadow: false\n      },\n      title: {\n        text: $chart.title || ''\n      },\n\n      //tooltip: {\n      //  pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'\n      //},\n\n      plotOptions: {\n        pie: {\n          allowPointSelect: true,\n          cursor: 'pointer',\n          dataLabels: {\n            enabled: true,\n            color: '#000000',\n            connectorColor: '#000000',\n            formatter: function() {\n              return '<b>'+ this.point.name +'</b>: '+ this.percentage +' %';\n            }\n          }\n        }\n      },\n\n      series: [data]\n    });\n  },\n\n  barchart: function($chart, data){\n    return new Highcharts.Chart({\n      chart: {\n        renderTo: $chart.el,\n        type: 'bar',\n        plotBackgroundColor: null,\n        plotBorderWidth: null,\n        plotShadow: false\n      },\n      title: {\n        text: $chart.title || ''\n      },\n      xAxis: {\n        title: {\n          text: data.options.rowDescription\n        },\n        labels: {\n          // format: '{value:%m-%d}'\n        },\n        categories: data.options.categories\n      },\n      yAxis: {\n        min: 0,\n        title: {\n          align: 'high'\n        },\n        labels: {\n          overflow: 'justify'\n        }\n      },\n      //tooltip: {\n      //  valueSuffix: ' millions'\n      //},\n      plotOptions: {\n        bar: {\n          dataLabels: {\n            enabled: true\n          }\n        }\n      },\n      legend: {\n        layout: 'vertical',\n        align: 'right',\n        verticalAlign: 'top',\n        x: -40,\n        y: 100,\n        floating: true,\n        borderWidth: 1,\n        backgroundColor: '#FFFFFF',\n        shadow: true\n      },\n      credits: {\n        enabled: false\n      },\n      series: data.result\n    });\n  },\n\n  linechart: function($chart, data){\n    return new Highcharts.Chart({\n      chart: {\n        renderTo: $chart.el,\n        type: 'line',\n        plotBackgroundColor: null,\n        plotBorderWidth: null,\n        plotShadow: false\n      },\n      title: {\n        text: $chart.title || '',\n        x: -20 //center\n      },\n      xAxis: {\n        categories: data.options.categories,\n        title: {\n          text: data.options.rowDescription\n        }\n      },\n      yAxis: {\n        title: {\n          // text: 'Temperature (°C)'\n        },\n        plotLines: [{\n          value: 0,\n          width: 1,\n          color: '#808080'\n        }]\n      },\n      //tooltip: {\n      //  valueSuffix: '°C'\n      //},\n      legend: {\n        layout: 'vertical',\n        align: 'right',\n        verticalAlign: 'middle',\n        borderWidth: 0\n      },\n      series: data.result\n    });\n  }\n});\n"]}